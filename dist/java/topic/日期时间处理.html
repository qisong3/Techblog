<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>日期时间处理 | Errison&#39;s share</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/logo.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <script>var _hmt = _hmt || [];
            (function() {
              var hm = document.createElement("script");
              hm.src = "https://hm.baidu.com/hm.js?b16f225f97b3c7e88a6ecd6e49d45b37";
              var s = document.getElementsByTagName("script")[0]; 
              s.parentNode.insertBefore(hm, s);
            })();
          </script>
    <meta name="description" content="时间处理">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    <link rel="preload" href="/assets/css/0.styles.35789c7e.css" as="style"><link rel="preload" href="/assets/js/app.a466cfde.js" as="script"><link rel="preload" href="/assets/js/3.3e98eff2.js" as="script"><link rel="preload" href="/assets/js/33.90f66897.js" as="script"><link rel="preload" href="/assets/js/6.8fb5b480.js" as="script"><link rel="prefetch" href="/assets/js/10.d80d54bd.js"><link rel="prefetch" href="/assets/js/11.4a65c791.js"><link rel="prefetch" href="/assets/js/12.11ff6baf.js"><link rel="prefetch" href="/assets/js/13.e8fa261e.js"><link rel="prefetch" href="/assets/js/14.da6b6d22.js"><link rel="prefetch" href="/assets/js/15.f9cf18de.js"><link rel="prefetch" href="/assets/js/16.9eecd657.js"><link rel="prefetch" href="/assets/js/17.4a96a70f.js"><link rel="prefetch" href="/assets/js/18.2e024a33.js"><link rel="prefetch" href="/assets/js/19.7de7c7dd.js"><link rel="prefetch" href="/assets/js/20.3d0c1515.js"><link rel="prefetch" href="/assets/js/21.40f44eb2.js"><link rel="prefetch" href="/assets/js/22.624bf4f2.js"><link rel="prefetch" href="/assets/js/23.98e764aa.js"><link rel="prefetch" href="/assets/js/24.77c2f73c.js"><link rel="prefetch" href="/assets/js/25.ce86da79.js"><link rel="prefetch" href="/assets/js/26.b17ce033.js"><link rel="prefetch" href="/assets/js/27.1e8ed1e1.js"><link rel="prefetch" href="/assets/js/28.1f5802c2.js"><link rel="prefetch" href="/assets/js/29.6c5c148a.js"><link rel="prefetch" href="/assets/js/30.784956c6.js"><link rel="prefetch" href="/assets/js/31.e1486375.js"><link rel="prefetch" href="/assets/js/32.fa44ee07.js"><link rel="prefetch" href="/assets/js/34.7d962fe8.js"><link rel="prefetch" href="/assets/js/35.728e2c50.js"><link rel="prefetch" href="/assets/js/36.ee03cf65.js"><link rel="prefetch" href="/assets/js/37.78500b17.js"><link rel="prefetch" href="/assets/js/38.8b4970bc.js"><link rel="prefetch" href="/assets/js/39.502c7193.js"><link rel="prefetch" href="/assets/js/4.a8ae41ad.js"><link rel="prefetch" href="/assets/js/40.ddd933ea.js"><link rel="prefetch" href="/assets/js/41.0275fc9f.js"><link rel="prefetch" href="/assets/js/42.bfb4824c.js"><link rel="prefetch" href="/assets/js/5.83a396a2.js"><link rel="prefetch" href="/assets/js/7.1de6366e.js"><link rel="prefetch" href="/assets/js/8.c03dc60d.js"><link rel="prefetch" href="/assets/js/9.224f9326.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.1fdfa170.js">
    <link rel="stylesheet" href="/assets/css/0.styles.35789c7e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="Errison's share" class="logo"> <span class="site-name can-hide">Errison's share</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="source" class="dropdown-title"><span class="title">源码系列</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Java源码
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/source/java-collections/" class="nav-link">
  集合
</a></li><li class="dropdown-subitem"><a href="/source/java-wrapper/" class="nav-link">
  包装类
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="algorithm" class="dropdown-title"><span class="title">算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          数据结构
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/algorithm/array/" class="nav-link">
  数组
</a></li><li class="dropdown-subitem"><a href="/algorithm/stack.html" class="nav-link">
  栈
</a></li><li class="dropdown-subitem"><a href="/algorithm/heap/" class="nav-link">
  堆
</a></li><li class="dropdown-subitem"><a href="/algorithm/tree.html" class="nav-link">
  树
</a></li><li class="dropdown-subitem"><a href="/algorithm/graph.html" class="nav-link">
  图
</a></li><li class="dropdown-subitem"><a href="/algorithm/hashtable.html" class="nav-link">
  哈希表
</a></li></ul></li><li class="dropdown-item"><h4>
          算法
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/algorithm/greedy.html" class="nav-link">
  贪心
</a></li><li class="dropdown-subitem"><a href="/algorithm/backtracking.html" class="nav-link">
  回溯
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="java" class="dropdown-title"><span class="title">Java专题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Java基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/history/" class="nav-link">
  Java简史
</a></li></ul></li><li class="dropdown-item"><h4>
          Java深入
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/review/" class="nav-link">
  面试集锦
</a></li><li class="dropdown-subitem"><a href="/java/topic/" class="nav-link router-link-active">
  专题系列
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="mysql" class="dropdown-title"><span class="title">MySQL专题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          MySQL基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/mysql/datatype/" class="nav-link">
  MySQL数据格式
</a></li><li class="dropdown-subitem"><a href="/mysql/sql-statement/" class="nav-link">
  数据库语句
</a></li></ul></li><li class="dropdown-item"><h4>
          MySQL优化
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/mysql/upgrade/" class="nav-link">
  MySQL优化
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="share" class="dropdown-title"><span class="title">分享</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          个人分享
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/share/technical/" class="nav-link">
  实践技术
</a></li></ul></li><li class="dropdown-item"><h4>
          百家之长
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/share/top/" class="nav-link">
  公众号精品
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/qisong3" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Contact
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="source" class="dropdown-title"><span class="title">源码系列</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Java源码
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/source/java-collections/" class="nav-link">
  集合
</a></li><li class="dropdown-subitem"><a href="/source/java-wrapper/" class="nav-link">
  包装类
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="algorithm" class="dropdown-title"><span class="title">算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          数据结构
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/algorithm/array/" class="nav-link">
  数组
</a></li><li class="dropdown-subitem"><a href="/algorithm/stack.html" class="nav-link">
  栈
</a></li><li class="dropdown-subitem"><a href="/algorithm/heap/" class="nav-link">
  堆
</a></li><li class="dropdown-subitem"><a href="/algorithm/tree.html" class="nav-link">
  树
</a></li><li class="dropdown-subitem"><a href="/algorithm/graph.html" class="nav-link">
  图
</a></li><li class="dropdown-subitem"><a href="/algorithm/hashtable.html" class="nav-link">
  哈希表
</a></li></ul></li><li class="dropdown-item"><h4>
          算法
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/algorithm/greedy.html" class="nav-link">
  贪心
</a></li><li class="dropdown-subitem"><a href="/algorithm/backtracking.html" class="nav-link">
  回溯
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="java" class="dropdown-title"><span class="title">Java专题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Java基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/history/" class="nav-link">
  Java简史
</a></li></ul></li><li class="dropdown-item"><h4>
          Java深入
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/review/" class="nav-link">
  面试集锦
</a></li><li class="dropdown-subitem"><a href="/java/topic/" class="nav-link router-link-active">
  专题系列
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="mysql" class="dropdown-title"><span class="title">MySQL专题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          MySQL基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/mysql/datatype/" class="nav-link">
  MySQL数据格式
</a></li><li class="dropdown-subitem"><a href="/mysql/sql-statement/" class="nav-link">
  数据库语句
</a></li></ul></li><li class="dropdown-item"><h4>
          MySQL优化
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/mysql/upgrade/" class="nav-link">
  MySQL优化
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="share" class="dropdown-title"><span class="title">分享</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          个人分享
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/share/technical/" class="nav-link">
  实践技术
</a></li></ul></li><li class="dropdown-item"><h4>
          百家之长
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/share/top/" class="nav-link">
  公众号精品
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/qisong3" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Contact
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>专题系列</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/java/topic/" aria-current="page" class="sidebar-link">Java专题系列</a></li><li><a href="/java/topic/日期时间处理.html" class="active sidebar-link">日期时间处理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java/topic/日期时间处理.html#概述" class="sidebar-link">概述</a></li><li class="sidebar-sub-header"><a href="/java/topic/日期时间处理.html#早期的java时间处理" class="sidebar-link">早期的Java时间处理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java/topic/日期时间处理.html#date" class="sidebar-link">Date</a></li><li class="sidebar-sub-header"><a href="/java/topic/日期时间处理.html#simpledateformat" class="sidebar-link">SimpleDateFormat</a></li></ul></li><li class="sidebar-sub-header"><a href="/java/topic/日期时间处理.html#java8-以后" class="sidebar-link">Java8 以后</a></li><li class="sidebar-sub-header"><a href="/java/topic/日期时间处理.html#其他时间处理工具" class="sidebar-link">其他时间处理工具</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="概述"><a href="#概述" class="header-anchor">#</a> 概述</h2> <p>自JDK1.0起，时间处理相关API就已经发布。不过由于设计不合理，并且没有考虑到并发，时区等，一直为人所诟病。</p> <p>JDK1.1中新增了时区处理，但并发的问题继续保留了下来。为了避坑，三方库如JODA-Time给出了自己的解决方案。</p> <p>核心代码被弃用，三方库风生水起，这样显然让Java社区很没有面子，JDK1.8推出了全新的日期/时间处理API，算是给出了交代。</p> <h2 id="早期的java时间处理"><a href="#早期的java时间处理" class="header-anchor">#</a> 早期的Java时间处理</h2> <h3 id="date"><a href="#date" class="header-anchor">#</a> Date</h3> <p>Date类表示一个特定的时间点，精确到毫秒。Date类中的核心变量是一个格里尼治时间1970.1.1零点至今的时间戳。用这么一个变量，既要表示日期，又要表示时间，还要考虑时区，确实是有些困难。</p> <p>Date类的构造函数需要传入一个长整型的时间戳，或者默认使用系统当前时间的时间戳。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token comment">// constrctor 1 </span>
    <span class="token keyword">public</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token keyword">long</span> date<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        fastTime <span class="token operator">=</span> date<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// constrctor 2</span>
    <span class="token keyword">public</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// consturctor 3</span>
    <span class="token keyword">public</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token keyword">int</span> year<span class="token punctuation">,</span> <span class="token keyword">int</span> month<span class="token punctuation">,</span> <span class="token keyword">int</span> date<span class="token punctuation">,</span> <span class="token keyword">int</span> hrs<span class="token punctuation">,</span> <span class="token keyword">int</span> min<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">(</span>year<span class="token punctuation">,</span> month<span class="token punctuation">,</span> date<span class="token punctuation">,</span> hrs<span class="token punctuation">,</span> min<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>前两个构造函数比较常用，最后一个构造函数，就有一些坑了。虽说时间戳是从1970年开始算的，但是这里的年份确是从1900年开始算的，月份也是从0开始而不是从1开始，很不合理，JDK1.1就被弃用了。</p> <p>与此同时，从Date中获取Year,Month,Day等也都被弃用了，官方API中寿命这么短暂的，也确实不多。</p> <p>Date类的其他函数，目前还没有被弃用的已经不多了，简而言之，Date类存在的最大价值，是用一个长整型定义了1970年以来的各个时间。</p> <h3 id="simpledateformat"><a href="#simpledateformat" class="header-anchor">#</a> SimpleDateFormat</h3> <p>计算机的程序终究还是要展示给用户看的，只有一个长整型时间戳显然是很难理解的。为了将日期时间在机器语言和人类语言之间做转换，需要用到SimpleDateFormat。</p> <p>SimpleDateFormat用于格式化(format 机器语言-&gt;人类语言)和解析（parse 人类语言-&gt;机器语言）日期和时间。</p> <p>以一个简单的例子说明，通过构造模板来输出当前的时间。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token comment">// 构造对象   </span>
    <span class="token class-name">String</span> pattern <span class="token operator">=</span> <span class="token string">&quot;E M yyyy HH:mm:ss.SSS Z&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">// 格式化输出</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span>pattern<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>输出</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>公元 星期五 10 2020 17:50:31.189 +0800
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="模板语法"><a href="#模板语法" class="header-anchor">#</a> 模板语法</h4> <p>翻译需要翻译的模板，模板可以通过构造函数来创建。模板有对应的语法格式，列举如下。</p> <table><thead><tr><th style="text-align:center;">字符</th> <th style="text-align:left;">解释</th></tr></thead> <tbody><tr><td style="text-align:center;">G</td> <td style="text-align:left;">Era designator (before christ, after christ)</td></tr> <tr><td style="text-align:center;">y</td> <td style="text-align:left;">Year (e.g. 12 or 2012). Use either yy or yyyy.</td></tr> <tr><td style="text-align:center;">M</td> <td style="text-align:left;">Month in year. Number of M's determine length of format (e.g. MM, MMM or MMMMM)</td></tr> <tr><td style="text-align:center;">d</td> <td style="text-align:left;">Day in month. Number of d's determine length of format (e.g. d or dd)</td></tr> <tr><td style="text-align:center;">h</td> <td style="text-align:left;">Hour of day, 1-12 (AM / PM) (normally hh)</td></tr> <tr><td style="text-align:center;">H</td> <td style="text-align:left;">Hour of day, 0-23 (normally HH)</td></tr> <tr><td style="text-align:center;">s</td> <td style="text-align:left;">Second in minute, 0-59 (normally ss)</td></tr> <tr><td style="text-align:center;">S</td> <td style="text-align:left;">Millisecond in second, 0-999 (normally SSS)</td></tr> <tr><td style="text-align:center;">E</td> <td style="text-align:left;">Day in week (e.g Monday, Tuesday etc.)</td></tr> <tr><td style="text-align:center;">F</td> <td style="text-align:left;">Day of week in month (e.g. 1st Thursday of December)</td></tr> <tr><td style="text-align:center;">w</td> <td style="text-align:left;">Week in year (1-53)</td></tr> <tr><td style="text-align:center;">W</td> <td style="text-align:left;">Week in month (0-5)</td></tr> <tr><td style="text-align:center;">a</td> <td style="text-align:left;">AM / PM marker</td></tr> <tr><td style="text-align:center;">k</td> <td style="text-align:left;">Hour in day (1-24, unlike HH's 0-23)</td></tr> <tr><td style="text-align:center;">K</td> <td style="text-align:left;">Hour in day, AM / PM (0-11)</td></tr> <tr><td style="text-align:center;">z</td> <td style="text-align:left;">Time Zone</td></tr></tbody></table> <p>用来翻译日期时间的模板，就是由对应的字符组合起来表示。</p> <table><thead><tr><th style="text-align:center;">模式</th> <th style="text-align:center;">举例</th></tr></thead> <tbody><tr><td style="text-align:center;">dd-MM-yy</td> <td style="text-align:center;">31-01-12</td></tr> <tr><td style="text-align:center;">MM-dd-yyyy</td> <td style="text-align:center;">01-31-2012</td></tr> <tr><td style="text-align:center;">dd-MM-yyyy</td> <td style="text-align:center;">31-01-2012</td></tr> <tr><td style="text-align:center;">yyyy-MM-dd</td> <td style="text-align:center;">2012-01-31</td></tr> <tr><td style="text-align:center;">yyyy-MM-dd HH:mm:ss</td> <td style="text-align:center;">2012-01-31 23:59:59</td></tr> <tr><td style="text-align:center;">yyyy-MM-dd HH:mm:ss.SSS</td> <td style="text-align:center;">2012-01-31 23:59:59.999</td></tr> <tr><td style="text-align:center;">EEEEE MMMMM yyyy HH:mm:ss.SSSZ</td> <td style="text-align:center;">Saturday November 2012 10:45:42.720+0100</td></tr></tbody></table> <p>举例说明，一个Date对象可以格式化成需要的输出形式。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token comment">// 由Date对象获得格式化日期</span>
    <span class="token comment">// 模板对象   </span>
    <span class="token class-name">String</span> pattern <span class="token operator">=</span> <span class="token string">&quot;E M yyyy HH:mm:ss.SSS Z&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">// 格式化输出</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span>pattern<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 输出内容</span>
    <span class="token comment">// 公元 星期一 10 2020 14:59:06.410 +0800 </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>反之同理，从一个格式化输出的时间，可以获得具体的Date对象。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token comment">// 由Date对象获得格式化日期</span>
    <span class="token comment">// 摸板对象   </span>
    <span class="token class-name">String</span> pattern <span class="token operator">=</span> <span class="token string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">// 日期字符串</span>
    <span class="token class-name">String</span> dateStr <span class="token operator">=</span> <span class="token string">&quot;2020-10-19 15:23:33&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">// 格式化输出</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span>pattern<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>dateStr<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 输出内容</span>
    <span class="token comment">// 1603092213000</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="本地定制化"><a href="#本地定制化" class="header-anchor">#</a> 本地定制化</h4> <p>各个国家对月份的或者星期的称呼可能不同，如果都按Monday，March等输出，并不能满足区域本地化的要求。</p> <p>DateFormatSymbols便是辅助实现的类。可以通过DateFormatSymbols设置星期，月份，上下午，时区等定制化内容。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ParseException</span><span class="token punctuation">{</span>
        <span class="token class-name">Locale</span> locale <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Locale</span><span class="token punctuation">(</span><span class="token string">&quot;zh&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;CHINA&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">DateFormatSymbols</span> dateFormatSymbols <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DateFormatSymbols</span><span class="token punctuation">(</span>locale<span class="token punctuation">)</span><span class="token punctuation">;</span>
        dateFormatSymbols<span class="token punctuation">.</span><span class="token function">setWeekdays</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>
                <span class="token string">&quot;星期一&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;星期二&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;星期三&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;星期四&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;星期五&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;星期六&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;星期日&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">String</span> pattern <span class="token operator">=</span> <span class="token string">&quot;EEEEE MMMMM yyyy&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">SimpleDateFormat</span> simpleDateFormat <span class="token operator">=</span>
                <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> dateFormatSymbols<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>simpleDateFormat<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// 输出</span>
    <span class="token comment">// 星期三 十月 2020</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h4 id="时区"><a href="#时区" class="header-anchor">#</a> 时区</h4> <p>JDK1推出的日期时间处理，没有考虑到时区问题。不同国家和地区使用同一个时间计时，这必然会造成混乱。JDK1.1发布了TimeZone，可以用之代表不同的时区，解决了这个问题。</p> <p>TimeZone代表相对于GMT时间的偏移，精确到分钟，使用字符串&quot;GMT+:08:00&quot;或者&quot;Asia/Shanghai&quot;可代表东八时区。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">timezone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            
        <span class="token comment">// 时区类型</span>
        <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token class-name">TimeZone</span><span class="token punctuation">.</span><span class="token function">getAvailableIDs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>item <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>item <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 按时区输出</span>
        <span class="token class-name">SimpleDateFormat</span> simpleDateFormat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">&quot;yyyy-MM-dd HH:mm:ssZ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        simpleDateFormat<span class="token punctuation">.</span><span class="token function">setTimeZone</span><span class="token punctuation">(</span><span class="token class-name">TimeZone</span><span class="token punctuation">.</span><span class="token function">getTimeZone</span><span class="token punctuation">(</span><span class="token string">&quot;Europe/London&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>simpleDateFormat<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        simpleDateFormat<span class="token punctuation">.</span><span class="token function">setTimeZone</span><span class="token punctuation">(</span><span class="token class-name">TimeZone</span><span class="token punctuation">.</span><span class="token function">getTimeZone</span><span class="token punctuation">(</span><span class="token string">&quot;Asia/Shanghai&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>simpleDateFormat<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>输出</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Africa/Abidjan Africa/Accra Africa/Addis_Ababa Africa/Algiers Africa/Asmara Africa/Asmera Africa/Bamako Africa/Bangui Africa/Banjul Africa/Bissau Africa/Blantyre Africa/Brazzaville Africa/Bujumbura Africa/Cairo Africa/Casablanca Africa/Ceuta Africa/Conakry Africa/Dakar Africa/Dar_es_Salaam Africa/Djibouti Africa/Douala Africa/El_Aaiun Africa/Freetown Africa/Gaborone Africa/Harare Africa/Johannesburg Africa/Juba Africa/Kampala Africa/Khartoum Africa/Kigali Africa/Kinshasa Africa/Lagos Africa/Libreville Africa/Lome Africa/Luanda Africa/Lubumbashi Africa/Lusaka Africa/Malabo Africa/Maputo Africa/Maseru Africa/Mbabane Africa/Mogadishu Africa/Monrovia Africa/Nairobi Africa/Ndjamena Africa/Niamey Africa/Nouakchott Africa/Ouagadougou Africa/Porto-Novo Africa/Sao_Tome Africa/Timbuktu Africa/Tripoli Africa/Tunis Africa/Windhoek America/Adak America/Anchorage America/Anguilla America/Antigua America/Araguaina America/Argentina/Buenos_Aires America/Argentina/Catamarca America/Argentina/ComodRivadavia America/Argentina/Cordoba America/Argentina/Jujuy America/Argentina/La_Rioja America/Argentina/Mendoza America/Argentina/Rio_Gallegos America/Argentina/Salta America/Argentina/San_Juan America/Argentina/San_Luis America/Argentina/Tucuman America/Argentina/Ushuaia America/Aruba America/Asuncion America/Atikokan America/Atka America/Bahia America/Bahia_Banderas America/Barbados America/Belem America/Belize America/Blanc-Sablon America/Boa_Vista America/Bogota America/Boise America/Buenos_Aires America/Cambridge_Bay America/Campo_Grande America/Cancun America/Caracas America/Catamarca America/Cayenne America/Cayman America/Chicago America/Chihuahua America/Coral_Harbour America/Cordoba America/Costa_Rica America/Creston America/Cuiaba America/Curacao America/Danmarkshavn America/Dawson America/Dawson_Creek America/Denver America/Detroit America/Dominica America/Edmonton America/Eirunepe America/El_Salvador America/Ensenada America/Fort_Nelson America/Fort_Wayne America/Fortaleza America/Glace_Bay America/Godthab America/Goose_Bay America/Grand_Turk America/Grenada America/Guadeloupe America/Guatemala America/Guayaquil America/Guyana America/Halifax America/Havana America/Hermosillo America/Indiana/Indianapolis America/Indiana/Knox America/Indiana/Marengo America/Indiana/Petersburg America/Indiana/Tell_City America/Indiana/Vevay America/Indiana/Vincennes America/Indiana/Winamac America/Indianapolis America/Inuvik America/Iqaluit America/Jamaica America/Jujuy America/Juneau America/Kentucky/Louisville America/Kentucky/Monticello America/Knox_IN America/Kralendijk America/La_Paz America/Lima America/Los_Angeles America/Louisville America/Lower_Princes America/Maceio America/Managua America/Manaus America/Marigot America/Martinique America/Matamoros America/Mazatlan America/Mendoza America/Menominee America/Merida America/Metlakatla America/Mexico_City America/Miquelon America/Moncton America/Monterrey America/Montevideo America/Montreal America/Montserrat America/Nassau America/New_York America/Nipigon America/Nome America/Noronha America/North_Dakota/Beulah America/North_Dakota/Center America/North_Dakota/New_Salem America/Ojinaga America/Panama America/Pangnirtung America/Paramaribo America/Phoenix America/Port-au-Prince America/Port_of_Spain America/Porto_Acre America/Porto_Velho America/Puerto_Rico America/Punta_Arenas America/Rainy_River America/Rankin_Inlet America/Recife America/Regina America/Resolute America/Rio_Branco America/Rosario America/Santa_Isabel America/Santarem America/Santiago America/Santo_Domingo America/Sao_Paulo America/Scoresbysund America/Shiprock America/Sitka America/St_Barthelemy America/St_Johns America/St_Kitts America/St_Lucia America/St_Thomas America/St_Vincent America/Swift_Current America/Tegucigalpa America/Thule America/Thunder_Bay America/Tijuana America/Toronto America/Tortola America/Vancouver America/Virgin America/Whitehorse America/Winnipeg America/Yakutat America/Yellowknife Antarctica/Casey Antarctica/Davis Antarctica/DumontDUrville Antarctica/Macquarie Antarctica/Mawson Antarctica/McMurdo Antarctica/Palmer Antarctica/Rothera Antarctica/South_Pole Antarctica/Syowa Antarctica/Troll Antarctica/Vostok Arctic/Longyearbyen Asia/Aden Asia/Almaty Asia/Amman Asia/Anadyr Asia/Aqtau Asia/Aqtobe Asia/Ashgabat Asia/Ashkhabad Asia/Atyrau Asia/Baghdad Asia/Bahrain Asia/Baku Asia/Bangkok Asia/Barnaul Asia/Beirut Asia/Bishkek Asia/Brunei Asia/Calcutta Asia/Chita Asia/Choibalsan Asia/Chongqing Asia/Chungking Asia/Colombo Asia/Dacca Asia/Damascus Asia/Dhaka Asia/Dili Asia/Dubai Asia/Dushanbe Asia/Famagusta Asia/Gaza Asia/Harbin Asia/Hebron Asia/Ho_Chi_Minh Asia/Hong_Kong Asia/Hovd Asia/Irkutsk Asia/Istanbul Asia/Jakarta Asia/Jayapura Asia/Jerusalem Asia/Kabul Asia/Kamchatka Asia/Karachi Asia/Kashgar Asia/Kathmandu Asia/Katmandu Asia/Khandyga Asia/Kolkata Asia/Krasnoyarsk Asia/Kuala_Lumpur Asia/Kuching Asia/Kuwait Asia/Macao Asia/Macau Asia/Magadan Asia/Makassar Asia/Manila Asia/Muscat Asia/Nicosia Asia/Novokuznetsk Asia/Novosibirsk Asia/Omsk Asia/Oral Asia/Phnom_Penh Asia/Pontianak Asia/Pyongyang Asia/Qatar Asia/Qyzylorda Asia/Rangoon Asia/Riyadh Asia/Saigon Asia/Sakhalin Asia/Samarkand Asia/Seoul Asia/Shanghai Asia/Singapore Asia/Srednekolymsk Asia/Taipei Asia/Tashkent Asia/Tbilisi Asia/Tehran Asia/Tel_Aviv Asia/Thimbu Asia/Thimphu Asia/Tokyo Asia/Tomsk Asia/Ujung_Pandang Asia/Ulaanbaatar Asia/Ulan_Bator Asia/Urumqi Asia/Ust-Nera Asia/Vientiane Asia/Vladivostok Asia/Yakutsk Asia/Yangon Asia/Yekaterinburg Asia/Yerevan Atlantic/Azores Atlantic/Bermuda Atlantic/Canary Atlantic/Cape_Verde Atlantic/Faeroe Atlantic/Faroe Atlantic/Jan_Mayen Atlantic/Madeira Atlantic/Reykjavik Atlantic/South_Georgia Atlantic/St_Helena Atlantic/Stanley Australia/ACT Australia/Adelaide Australia/Brisbane Australia/Broken_Hill Australia/Canberra Australia/Currie Australia/Darwin Australia/Eucla Australia/Hobart Australia/LHI Australia/Lindeman Australia/Lord_Howe Australia/Melbourne Australia/NSW Australia/North Australia/Perth Australia/Queensland Australia/South Australia/Sydney Australia/Tasmania Australia/Victoria Australia/West Australia/Yancowinna Brazil/Acre Brazil/DeNoronha Brazil/East Brazil/West CET CST6CDT Canada/Atlantic Canada/Central Canada/Eastern Canada/Mountain Canada/Newfoundland Canada/Pacific Canada/Saskatchewan Canada/Yukon Chile/Continental Chile/EasterIsland Cuba EET EST5EDT Egypt Eire Etc/GMT Etc/GMT+0 Etc/GMT+1 Etc/GMT+10 Etc/GMT+11 Etc/GMT+12 Etc/GMT+2 Etc/GMT+3 Etc/GMT+4 Etc/GMT+5 Etc/GMT+6 Etc/GMT+7 Etc/GMT+8 Etc/GMT+9 Etc/GMT-0 Etc/GMT-1 Etc/GMT-10 Etc/GMT-11 Etc/GMT-12 Etc/GMT-13 Etc/GMT-14 Etc/GMT-2 Etc/GMT-3 Etc/GMT-4 Etc/GMT-5 Etc/GMT-6 Etc/GMT-7 Etc/GMT-8 Etc/GMT-9 Etc/GMT0 Etc/Greenwich Etc/UCT Etc/UTC Etc/Universal Etc/Zulu Europe/Amsterdam Europe/Andorra Europe/Astrakhan Europe/Athens Europe/Belfast Europe/Belgrade Europe/Berlin Europe/Bratislava Europe/Brussels Europe/Bucharest Europe/Budapest Europe/Busingen Europe/Chisinau Europe/Copenhagen Europe/Dublin Europe/Gibraltar Europe/Guernsey Europe/Helsinki Europe/Isle_of_Man Europe/Istanbul Europe/Jersey Europe/Kaliningrad Europe/Kiev Europe/Kirov Europe/Lisbon Europe/Ljubljana Europe/London Europe/Luxembourg Europe/Madrid Europe/Malta Europe/Mariehamn Europe/Minsk Europe/Monaco Europe/Moscow Europe/Nicosia Europe/Oslo Europe/Paris Europe/Podgorica Europe/Prague Europe/Riga Europe/Rome Europe/Samara Europe/San_Marino Europe/Sarajevo Europe/Saratov Europe/Simferopol Europe/Skopje Europe/Sofia Europe/Stockholm Europe/Tallinn Europe/Tirane Europe/Tiraspol Europe/Ulyanovsk Europe/Uzhgorod Europe/Vaduz Europe/Vatican Europe/Vienna Europe/Vilnius Europe/Volgograd Europe/Warsaw Europe/Zagreb Europe/Zaporozhye Europe/Zurich GB GB-Eire GMT GMT0 Greenwich Hongkong Iceland Indian/Antananarivo Indian/Chagos Indian/Christmas Indian/Cocos Indian/Comoro Indian/Kerguelen Indian/Mahe Indian/Maldives Indian/Mauritius Indian/Mayotte Indian/Reunion Iran Israel Jamaica Japan Kwajalein Libya MET MST7MDT Mexico/BajaNorte Mexico/BajaSur Mexico/General NZ NZ-CHAT Navajo PRC PST8PDT Pacific/Apia Pacific/Auckland Pacific/Bougainville Pacific/Chatham Pacific/Chuuk Pacific/Easter Pacific/Efate Pacific/Enderbury Pacific/Fakaofo Pacific/Fiji Pacific/Funafuti Pacific/Galapagos Pacific/Gambier Pacific/Guadalcanal Pacific/Guam Pacific/Honolulu Pacific/Johnston Pacific/Kiritimati Pacific/Kosrae Pacific/Kwajalein Pacific/Majuro Pacific/Marquesas Pacific/Midway Pacific/Nauru Pacific/Niue Pacific/Norfolk Pacific/Noumea Pacific/Pago_Pago Pacific/Palau Pacific/Pitcairn Pacific/Pohnpei Pacific/Ponape Pacific/Port_Moresby Pacific/Rarotonga Pacific/Saipan Pacific/Samoa Pacific/Tahiti Pacific/Tarawa Pacific/Tongatapu Pacific/Truk Pacific/Wake Pacific/Wallis Pacific/Yap Poland Portugal ROK Singapore SystemV/AST4 SystemV/AST4ADT SystemV/CST6 SystemV/CST6CDT SystemV/EST5 SystemV/EST5EDT SystemV/HST10 SystemV/MST7 SystemV/MST7MDT SystemV/PST8 SystemV/PST8PDT SystemV/YST9 SystemV/YST9YDT Turkey UCT US/Alaska US/Aleutian US/Arizona US/Central US/East-Indiana US/Eastern US/Hawaii US/Indiana-Starke US/Michigan US/Mountain US/Pacific US/Pacific-New US/Samoa UTC Universal W-SU WET Zulu EST HST MST ACT AET AGT ART AST BET BST CAT CNT CST CTT EAT ECT IET IST JST MIT NET NST PLT PNT PRT PST SST VST 
2020-10-19 10:18:28+0100
2020-10-19 17:18:28+0800
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="使用中需要注意的"><a href="#使用中需要注意的" class="header-anchor">#</a> 使用中需要注意的</h4> <p>早期的时间处理，最为人诟病的便是在多线程环境下的表现。单独的Date对象是安全的，但是一旦涉及到格式化或者翻译，就要使用到SimpleDateFormat，就可能引起多线程异常。</p> <p>举一个多线程下使用同一个SimpleDateFormat的例子。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    
    <span class="token keyword">private</span> <span class="token keyword">static</span>  <span class="token class-name">SimpleDateFormat</span> dateFormat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">createException</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token class-name">UnsafeTimeThread</span> timeThread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UnsafeTimeThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            timeThread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span>  <span class="token class-name">UnsafeTimeThread</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span><span class="token punctuation">{</span>
        <span class="token annotation punctuation">@SneakyThrows</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token class-name">String</span> string <span class="token operator">=</span> dateFormat<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dateFormat<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>基本会出现类似的运行结果</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>    at java.text.SimpleDateFormat.parse(SimpleDateFormat.java:1514)
        at java.text.DateFormat.parse(DateFormat.java:364)
        at cn.errison.time.OldTimeDemo$UnsafeTimeThread.run(OldTimeDemo.java:85)
    Exception in thread &quot;Thread-64&quot; java.lang.NumberFormatException: multiple points
        at sun.misc.FloatingDecimal.readJavaFormatString(FloatingDecimal.java:1890)
        at sun.misc.FloatingDecimal.parseDouble(FloatingDecimal.java:110)
        at java.lang.Double.parseDouble(Double.java:538)
        at java.text.DigitList.getDouble(DigitList.java:169)
        at java.text.DecimalFormat.parse(DecimalFormat.java:2089)
        at java.text.SimpleDateFormat.subParse(SimpleDateFormat.java:1869)
        at java.text.SimpleDateFormat.parse(SimpleDateFormat.java:1514)
        at java.text.DateFormat.parse(DateFormat.java:364)
        at cn.errison.time.OldTimeDemo$UnsafeTimeThread.run(OldTimeDemo.java:85)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>产生故障的原因是，SimpleDateFormat不是线程安全的，有类共有变量，这样多线程访问时产生竞态，很有可能会导致异常。</p> <h2 id="java8-以后"><a href="#java8-以后" class="header-anchor">#</a> Java8 以后</h2> <h2 id="其他时间处理工具"><a href="#其他时间处理工具" class="header-anchor">#</a> 其他时间处理工具</h2></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/qisong3/Techblog/edit/master/docs/java/topic/日期时间处理.md" target="_blank" rel="noopener noreferrer">在Github上编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/java/topic/" class="prev router-link-active">
        Java专题系列
      </a></span> <!----></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.a466cfde.js" defer></script><script src="/assets/js/3.3e98eff2.js" defer></script><script src="/assets/js/33.90f66897.js" defer></script><script src="/assets/js/6.8fb5b480.js" defer></script>
  </body>
</html>
