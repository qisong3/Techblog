<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>日期时间处理 | Errison&#39;s share</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/logo.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <script>var _hmt = _hmt || [];
            (function() {
              var hm = document.createElement("script");
              hm.src = "https://hm.baidu.com/hm.js?b16f225f97b3c7e88a6ecd6e49d45b37";
              var s = document.getElementsByTagName("script")[0]; 
              s.parentNode.insertBefore(hm, s);
            })();
          </script>
    <meta name="description" content="时间处理">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.f8109ada.css" as="style"><link rel="preload" href="/assets/js/app.97e375c5.js" as="script"><link rel="preload" href="/assets/js/3.fdc0d355.js" as="script"><link rel="preload" href="/assets/js/34.4f7c63b5.js" as="script"><link rel="preload" href="/assets/js/6.4d2b9347.js" as="script"><link rel="prefetch" href="/assets/js/10.23465533.js"><link rel="prefetch" href="/assets/js/11.a3bbc94e.js"><link rel="prefetch" href="/assets/js/12.c31076e8.js"><link rel="prefetch" href="/assets/js/13.d06284f9.js"><link rel="prefetch" href="/assets/js/14.e6200aac.js"><link rel="prefetch" href="/assets/js/15.dd3cba4b.js"><link rel="prefetch" href="/assets/js/16.6842e063.js"><link rel="prefetch" href="/assets/js/17.25ef7258.js"><link rel="prefetch" href="/assets/js/18.5f965dd5.js"><link rel="prefetch" href="/assets/js/19.41894caf.js"><link rel="prefetch" href="/assets/js/20.63bd8964.js"><link rel="prefetch" href="/assets/js/21.56bde27f.js"><link rel="prefetch" href="/assets/js/22.2b8e7da4.js"><link rel="prefetch" href="/assets/js/23.cfc9d513.js"><link rel="prefetch" href="/assets/js/24.19ba9efd.js"><link rel="prefetch" href="/assets/js/25.5b202a55.js"><link rel="prefetch" href="/assets/js/26.9fdec0c5.js"><link rel="prefetch" href="/assets/js/27.905c9462.js"><link rel="prefetch" href="/assets/js/28.9b50a481.js"><link rel="prefetch" href="/assets/js/29.7ca93053.js"><link rel="prefetch" href="/assets/js/30.9f728996.js"><link rel="prefetch" href="/assets/js/31.a0932788.js"><link rel="prefetch" href="/assets/js/32.837722f2.js"><link rel="prefetch" href="/assets/js/33.4294d0ff.js"><link rel="prefetch" href="/assets/js/35.70606b8a.js"><link rel="prefetch" href="/assets/js/36.9c85520e.js"><link rel="prefetch" href="/assets/js/37.758326bb.js"><link rel="prefetch" href="/assets/js/38.523fc434.js"><link rel="prefetch" href="/assets/js/39.ac9412b0.js"><link rel="prefetch" href="/assets/js/4.dccf3179.js"><link rel="prefetch" href="/assets/js/40.6f2c15b8.js"><link rel="prefetch" href="/assets/js/41.07614239.js"><link rel="prefetch" href="/assets/js/42.45f49ff1.js"><link rel="prefetch" href="/assets/js/43.0dc5bc42.js"><link rel="prefetch" href="/assets/js/44.02c9b2aa.js"><link rel="prefetch" href="/assets/js/45.b17835c4.js"><link rel="prefetch" href="/assets/js/46.69dd2d02.js"><link rel="prefetch" href="/assets/js/47.8bcedcbb.js"><link rel="prefetch" href="/assets/js/48.7fe41b26.js"><link rel="prefetch" href="/assets/js/49.cb7e3799.js"><link rel="prefetch" href="/assets/js/5.c160f37b.js"><link rel="prefetch" href="/assets/js/50.58a09a34.js"><link rel="prefetch" href="/assets/js/51.38f70cbc.js"><link rel="prefetch" href="/assets/js/52.59b0d079.js"><link rel="prefetch" href="/assets/js/53.88cf19eb.js"><link rel="prefetch" href="/assets/js/54.3b7bb64e.js"><link rel="prefetch" href="/assets/js/55.0eb19523.js"><link rel="prefetch" href="/assets/js/56.a39efb79.js"><link rel="prefetch" href="/assets/js/57.20eaadac.js"><link rel="prefetch" href="/assets/js/58.e7e5bc18.js"><link rel="prefetch" href="/assets/js/59.ef5f0f55.js"><link rel="prefetch" href="/assets/js/60.b65b496c.js"><link rel="prefetch" href="/assets/js/61.aee3d645.js"><link rel="prefetch" href="/assets/js/62.6227285d.js"><link rel="prefetch" href="/assets/js/7.ac30f5ef.js"><link rel="prefetch" href="/assets/js/8.7eb25cae.js"><link rel="prefetch" href="/assets/js/9.1aee6502.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.654d1c0f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f8109ada.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="Errison's share" class="logo"> <span class="site-name can-hide">Errison's share</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="source" class="dropdown-title"><span class="title">源码系列</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Java源码
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/source/java-collections/" class="nav-link">
  集合
</a></li><li class="dropdown-subitem"><a href="/source/java-wrapper/" class="nav-link">
  包装类
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="algorithm" class="dropdown-title"><span class="title">算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          数据结构
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/algorithm/array/" class="nav-link">
  数组
</a></li><li class="dropdown-subitem"><a href="/algorithm/stack.html" class="nav-link">
  栈
</a></li><li class="dropdown-subitem"><a href="/algorithm/heap/" class="nav-link">
  堆
</a></li><li class="dropdown-subitem"><a href="/algorithm/tree.html" class="nav-link">
  树
</a></li><li class="dropdown-subitem"><a href="/algorithm/graph.html" class="nav-link">
  图
</a></li><li class="dropdown-subitem"><a href="/algorithm/hashtable.html" class="nav-link">
  哈希表
</a></li></ul></li><li class="dropdown-item"><h4>
          算法
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/algorithm/greedy.html" class="nav-link">
  贪心
</a></li><li class="dropdown-subitem"><a href="/algorithm/backtracking.html" class="nav-link">
  回溯
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="java" class="dropdown-title"><span class="title">Java专题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Java基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/history/" class="nav-link">
  Java简史
</a></li></ul></li><li class="dropdown-item"><h4>
          Java深入
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/review/" class="nav-link">
  面试集锦
</a></li><li class="dropdown-subitem"><a href="/java/topic/" class="nav-link router-link-active">
  专题系列
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="mysql" class="dropdown-title"><span class="title">MySQL专题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          MySQL8.0官方手册中文版
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/mysql/manual/" class="nav-link">
  手册概述
</a></li><li class="dropdown-subitem"><a href="/mysql/manual-1/" class="nav-link">
  1 基本信息
</a></li><li class="dropdown-subitem"><a href="/mysql/manual-3/" class="nav-link">
  3 入门教程
</a></li></ul></li><li class="dropdown-item"><h4>
          MySQL进阶
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/mysql/advance/" class="nav-link">
  MySQL优化
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="share" class="dropdown-title"><span class="title">分享</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          个人分享
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/share/theoretical/" class="nav-link">
  理论见深度
</a></li><li class="dropdown-subitem"><a href="/share/technical/" class="nav-link">
  实践出真知
</a></li></ul></li><li class="dropdown-item"><h4>
          百家之长
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/share/top/" class="nav-link">
  公众号精品
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/qisong3" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Contact
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="source" class="dropdown-title"><span class="title">源码系列</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Java源码
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/source/java-collections/" class="nav-link">
  集合
</a></li><li class="dropdown-subitem"><a href="/source/java-wrapper/" class="nav-link">
  包装类
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="algorithm" class="dropdown-title"><span class="title">算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          数据结构
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/algorithm/array/" class="nav-link">
  数组
</a></li><li class="dropdown-subitem"><a href="/algorithm/stack.html" class="nav-link">
  栈
</a></li><li class="dropdown-subitem"><a href="/algorithm/heap/" class="nav-link">
  堆
</a></li><li class="dropdown-subitem"><a href="/algorithm/tree.html" class="nav-link">
  树
</a></li><li class="dropdown-subitem"><a href="/algorithm/graph.html" class="nav-link">
  图
</a></li><li class="dropdown-subitem"><a href="/algorithm/hashtable.html" class="nav-link">
  哈希表
</a></li></ul></li><li class="dropdown-item"><h4>
          算法
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/algorithm/greedy.html" class="nav-link">
  贪心
</a></li><li class="dropdown-subitem"><a href="/algorithm/backtracking.html" class="nav-link">
  回溯
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="java" class="dropdown-title"><span class="title">Java专题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Java基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/history/" class="nav-link">
  Java简史
</a></li></ul></li><li class="dropdown-item"><h4>
          Java深入
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/review/" class="nav-link">
  面试集锦
</a></li><li class="dropdown-subitem"><a href="/java/topic/" class="nav-link router-link-active">
  专题系列
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="mysql" class="dropdown-title"><span class="title">MySQL专题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          MySQL8.0官方手册中文版
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/mysql/manual/" class="nav-link">
  手册概述
</a></li><li class="dropdown-subitem"><a href="/mysql/manual-1/" class="nav-link">
  1 基本信息
</a></li><li class="dropdown-subitem"><a href="/mysql/manual-3/" class="nav-link">
  3 入门教程
</a></li></ul></li><li class="dropdown-item"><h4>
          MySQL进阶
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/mysql/advance/" class="nav-link">
  MySQL优化
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="share" class="dropdown-title"><span class="title">分享</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          个人分享
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/share/theoretical/" class="nav-link">
  理论见深度
</a></li><li class="dropdown-subitem"><a href="/share/technical/" class="nav-link">
  实践出真知
</a></li></ul></li><li class="dropdown-item"><h4>
          百家之长
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/share/top/" class="nav-link">
  公众号精品
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/qisong3" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Contact
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>专题系列</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/java/topic/" aria-current="page" class="sidebar-link">Java专题系列</a></li><li><a href="/java/topic/日期时间处理.html" class="active sidebar-link">日期时间处理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java/topic/日期时间处理.html#概述" class="sidebar-link">概述</a></li><li class="sidebar-sub-header"><a href="/java/topic/日期时间处理.html#预备知识" class="sidebar-link">预备知识</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java/topic/日期时间处理.html#日期" class="sidebar-link">日期</a></li><li class="sidebar-sub-header"><a href="/java/topic/日期时间处理.html#时间" class="sidebar-link">时间</a></li></ul></li><li class="sidebar-sub-header"><a href="/java/topic/日期时间处理.html#早期的java时间处理" class="sidebar-link">早期的Java时间处理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java/topic/日期时间处理.html#date" class="sidebar-link">Date</a></li><li class="sidebar-sub-header"><a href="/java/topic/日期时间处理.html#simpledateformat" class="sidebar-link">SimpleDateFormat</a></li></ul></li><li class="sidebar-sub-header"><a href="/java/topic/日期时间处理.html#jdk8-以后的日期时间处理" class="sidebar-link">JDK8 以后的日期时间处理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java/topic/日期时间处理.html#localdate" class="sidebar-link">LocalDate</a></li><li class="sidebar-sub-header"><a href="/java/topic/日期时间处理.html#localtime" class="sidebar-link">LocalTime</a></li><li class="sidebar-sub-header"><a href="/java/topic/日期时间处理.html#localdatetime" class="sidebar-link">LocalDateTime</a></li><li class="sidebar-sub-header"><a href="/java/topic/日期时间处理.html#instant" class="sidebar-link">Instant</a></li><li class="sidebar-sub-header"><a href="/java/topic/日期时间处理.html#period-duration" class="sidebar-link">Period &amp; Duration</a></li><li class="sidebar-sub-header"><a href="/java/topic/日期时间处理.html#zoneid-zoneoffset-zonedatetime-clock" class="sidebar-link">ZoneId &amp; ZoneOffset &amp; ZoneDateTime &amp; Clock</a></li><li class="sidebar-sub-header"><a href="/java/topic/日期时间处理.html#datetimeformatter" class="sidebar-link">DateTimeFormatter</a></li></ul></li><li class="sidebar-sub-header"><a href="/java/topic/日期时间处理.html#小结" class="sidebar-link">小结</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="概述"><a href="#概述" class="header-anchor">#</a> 概述</h2> <p>自JDK1.0起，时间处理相关API就已经发布。不过由于设计不合理，并且没有考虑到并发，时区等，一直为人所诟病。</p> <p>JDK1.1中新增了时区处理，但并发的问题继续保留了下来。为了避坑，三方库如JODA-Time给出了自己的解决方案。</p> <p>核心代码被弃用，三方库风生水起，这样显然让Java社区很没有面子，JDK1.8推出了全新的日期/时间处理API，算是给出了交代。</p> <h2 id="预备知识"><a href="#预备知识" class="header-anchor">#</a> 预备知识</h2> <p>如同不同的国家和地区有不同的语言，不同地区也有不同的日期时间标准。如欧洲区的格林威治时间，中国的农历，日本的年历等。</p> <p>在互联网中，不同的日期时间对象需要传输，就需要统一化标准。International Organization for Standardization (ISO) 国际化标准组织制定了ISO-8601，是一个国际化的日期和时间标准。</p> <p>全称为《数据存储和交换形式·信息交换·日期和时间的表示方法》，该标准的发布历史列举如下，最新的版本是2019年发布的ISO 8601-1和ISO 8601-2。</p> <table><thead><tr><th style="text-align:left;">版本</th> <th style="text-align:left;">名称</th></tr></thead> <tbody><tr><td style="text-align:left;">ISO 8601:1988</td> <td style="text-align:left;">Data elements and interchange formats — Information interchange — Representation of dates and times</td></tr> <tr><td style="text-align:left;">ISO 8601:1988/COR 1:1991</td> <td style="text-align:left;">Data elements and interchange formats — Information interchange — Representation of dates and times — Technical Corrigendum 1</td></tr> <tr><td style="text-align:left;">ISO 8601:2000</td> <td style="text-align:left;">Data elements and interchange formats — Information interchange — Representation of dates and times</td></tr> <tr><td style="text-align:left;">ISO 8601:2004</td> <td style="text-align:left;">Data elements and interchange formats — Information interchange — Representation of dates and times</td></tr> <tr><td style="text-align:left;">ISO 8601-1:2019</td> <td style="text-align:left;">Date and time — Representations for information interchange — Part 1: Basic rules</td></tr> <tr><td style="text-align:left;">ISO 8601-2:2019</td> <td style="text-align:left;">Date and time — Representations for information interchange — Part 2: Extensions</td></tr></tbody></table> <p>简而言之，ISO8601用于表示<a href="https://en.wikipedia.org/wiki/Proleptic_Gregorian_calendar" target="_blank" rel="noopener noreferrer">公历<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>日期，和基于24小时制(基于UTC 时区偏移)的时间的格式，而并没有定义新的日历或时间标准。</p> <p>ISO8601遵循几个原则：</p> <ul><li>日期和时间按从大到小排列，即年月(星期)日，时分秒</li> <li>每个日期和时间值需要前缀0填充，如07月，02时</li> <li>每个日期或事件可以有多种格式表示，如2009年1月20日可以表示为&quot;20190120&quot;或者&quot;2019-01-20&quot;</li></ul> <h3 id="日期"><a href="#日期" class="header-anchor">#</a> 日期</h3> <p>ISO 8601使用公历。</p> <ul><li><p>日期日历表示法</p> <ul><li>年使用带正负号的四位或者五位数字组成，表示±YYYYY。以公历公元1年为0001年，以公元前1年为0000年，公元前2年为-0001年，其他以此类推</li> <li>月、日用两位数字表示：MM、DD。</li> <li>只使用数字为基本格式。使用短横线&quot;-&quot;间隔开年、月、日为扩展格式。
例如，日期（2020年10月3日）可表示为2020-10-03，或20201003。</li></ul></li> <li><p>顺序日期表示法
可以将一年内的天的序数用3位数字表示，平年365天，闰年366天。如2004年5月3日可以表示为2004-124或2004124</p></li> <li><p>星期日历表示法
可以用2位数表示年内第几个日历星期，再加上一位数表示日历星期内第几天，但日历星期前要加上一个大写字母W，如2004年5月3日可写成2004-W19-1或2004W191。</p></li> <li><p>日历月表示法
可以用2位数表示本年内第几个日历月。例如，如2015年7月可写成：201507或2015-07。</p></li></ul> <h3 id="时间"><a href="#时间" class="header-anchor">#</a> 时间</h3> <p>ISO 8601使用24小时制。在最新版本的ISO8601-1 2009中，基本格式是T[hh][mm][ss]，扩展模式是T[hh]:[mm]:[ss]</p> <ul><li><p>时间表示</p> <ul><li>[hh] 表示0前缀的小时 00-23</li> <li>[mm] 表示0前缀的分钟 00-59</li> <li>[ss] 表示0前缀的秒 00-60 60用在<a href="https://en.wikipedia.org/wiki/Leap_second" target="_blank" rel="noopener noreferrer">闰秒<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>时</li></ul></li> <li><p>时区标识
ISO8601 默认使用<a href="https://en.wikipedia.org/wiki/Coordinated_Universal_Time" target="_blank" rel="noopener noreferrer">UTC<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>时间，如果未标明时区，将使用UTC时区。如果时区是UTC，在时间的末尾加上'Z'即可表示。&quot;09:30 UTC&quot;可以表示成&quot;09:30Z&quot;或者&quot;0930Z&quot;。以UTC 时区偏移添加在'Z'以后。举例说明。</p> <ul><li>&quot;−05:00&quot; 纽约标注时间 (UTC-05:00)</li> <li>&quot;−04:00&quot; 纽约夏令时 (UTC-04:00)</li> <li>&quot;+00:00&quot; 伦敦标准时间 (UTC±00:00)</li> <li>&quot;+08:00&quot; 北京时间 (UTC+08:00)</li></ul></li></ul> <h2 id="早期的java时间处理"><a href="#早期的java时间处理" class="header-anchor">#</a> 早期的Java时间处理</h2> <h3 id="date"><a href="#date" class="header-anchor">#</a> Date</h3> <p>Date类表示一个特定的时间点，精确到毫秒。Date类中的核心变量是一个格里尼治时间1970.1.1零点至今的时间戳。用这么一个变量，既要表示日期，又要表示时间，还要考虑时区，确实是有些困难。</p> <p>Date类的构造函数需要传入一个长整型的时间戳，或者默认使用系统当前时间的时间戳。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token comment">// constrctor 1 </span>
    <span class="token keyword">public</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token keyword">long</span> date<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        fastTime <span class="token operator">=</span> date<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// constrctor 2</span>
    <span class="token keyword">public</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// consturctor 3</span>
    <span class="token keyword">public</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token keyword">int</span> year<span class="token punctuation">,</span> <span class="token keyword">int</span> month<span class="token punctuation">,</span> <span class="token keyword">int</span> date<span class="token punctuation">,</span> <span class="token keyword">int</span> hrs<span class="token punctuation">,</span> <span class="token keyword">int</span> min<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">(</span>year<span class="token punctuation">,</span> month<span class="token punctuation">,</span> date<span class="token punctuation">,</span> hrs<span class="token punctuation">,</span> min<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>前两个构造函数比较常用，最后一个构造函数，就有一些坑了。虽说时间戳是从1970年开始算的，但是这里的年份确是从1900年开始算的，月份也是从0开始而不是从1开始，很不合理，JDK1.1就被弃用了。</p> <p>与此同时，从Date中获取Year,Month,Day等也都被弃用了，官方API中寿命这么短暂的，也确实不多。</p> <p>Date类的其他函数，目前还没有被弃用的已经不多了，简而言之，Date类存在的最大价值，是用一个长整型定义了1970年以来的各个时间。</p> <h3 id="simpledateformat"><a href="#simpledateformat" class="header-anchor">#</a> SimpleDateFormat</h3> <p>计算机的程序终究还是要展示给用户看的，只有一个长整型时间戳显然是很难理解的。为了将日期时间在机器语言和人类语言之间做转换，需要用到SimpleDateFormat。</p> <p>SimpleDateFormat用于格式化(format 机器语言-&gt;人类语言)和解析（parse 人类语言-&gt;机器语言）日期和时间。</p> <p>以一个简单的例子说明，通过构造模板来输出当前的时间。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token comment">// 构造对象   </span>
    <span class="token class-name">String</span> pattern <span class="token operator">=</span> <span class="token string">&quot;E M yyyy HH:mm:ss.SSS Z&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">// 格式化输出</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span>pattern<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>输出</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>公元 星期五 10 2020 17:50:31.189 +0800
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="模板语法"><a href="#模板语法" class="header-anchor">#</a> 模板语法</h4> <p>翻译需要翻译的模板，模板可以通过构造函数来创建。模板有对应的语法格式，列举如下。</p> <table><thead><tr><th style="text-align:center;">字符</th> <th style="text-align:left;">解释</th></tr></thead> <tbody><tr><td style="text-align:center;">G</td> <td style="text-align:left;">Era designator (before christ, after christ)</td></tr> <tr><td style="text-align:center;">y</td> <td style="text-align:left;">Year (e.g. 12 or 2012). Use either yy or yyyy.</td></tr> <tr><td style="text-align:center;">M</td> <td style="text-align:left;">Month in year. Number of M's determine length of format (e.g. MM, MMM or MMMMM)</td></tr> <tr><td style="text-align:center;">d</td> <td style="text-align:left;">Day in month. Number of d's determine length of format (e.g. d or dd)</td></tr> <tr><td style="text-align:center;">h</td> <td style="text-align:left;">Hour of day, 1-12 (AM / PM) (normally hh)</td></tr> <tr><td style="text-align:center;">H</td> <td style="text-align:left;">Hour of day, 0-23 (normally HH)</td></tr> <tr><td style="text-align:center;">s</td> <td style="text-align:left;">Second in minute, 0-59 (normally ss)</td></tr> <tr><td style="text-align:center;">S</td> <td style="text-align:left;">Millisecond in second, 0-999 (normally SSS)</td></tr> <tr><td style="text-align:center;">E</td> <td style="text-align:left;">Day in week (e.g Monday, Tuesday etc.)</td></tr> <tr><td style="text-align:center;">F</td> <td style="text-align:left;">Day of week in month (e.g. 1st Thursday of December)</td></tr> <tr><td style="text-align:center;">w</td> <td style="text-align:left;">Week in year (1-53)</td></tr> <tr><td style="text-align:center;">W</td> <td style="text-align:left;">Week in month (0-5)</td></tr> <tr><td style="text-align:center;">a</td> <td style="text-align:left;">AM / PM marker</td></tr> <tr><td style="text-align:center;">k</td> <td style="text-align:left;">Hour in day (1-24, unlike HH's 0-23)</td></tr> <tr><td style="text-align:center;">K</td> <td style="text-align:left;">Hour in day, AM / PM (0-11)</td></tr> <tr><td style="text-align:center;">z</td> <td style="text-align:left;">Time Zone</td></tr></tbody></table> <p>用来翻译日期时间的模板，就是由对应的字符组合起来表示。</p> <table><thead><tr><th style="text-align:center;">模式</th> <th style="text-align:center;">举例</th></tr></thead> <tbody><tr><td style="text-align:center;">dd-MM-yy</td> <td style="text-align:center;">31-01-12</td></tr> <tr><td style="text-align:center;">MM-dd-yyyy</td> <td style="text-align:center;">01-31-2012</td></tr> <tr><td style="text-align:center;">dd-MM-yyyy</td> <td style="text-align:center;">31-01-2012</td></tr> <tr><td style="text-align:center;">yyyy-MM-dd</td> <td style="text-align:center;">2012-01-31</td></tr> <tr><td style="text-align:center;">yyyy-MM-dd HH:mm:ss</td> <td style="text-align:center;">2012-01-31 23:59:59</td></tr> <tr><td style="text-align:center;">yyyy-MM-dd HH:mm:ss.SSS</td> <td style="text-align:center;">2012-01-31 23:59:59.999</td></tr> <tr><td style="text-align:center;">EEEEE MMMMM yyyy HH:mm:ss.SSSZ</td> <td style="text-align:center;">Saturday November 2012 10:45:42.720+0100</td></tr></tbody></table> <p>举例说明，一个Date对象可以格式化成需要的输出形式。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token comment">// 由Date对象获得格式化日期</span>
    <span class="token comment">// 模板对象   </span>
    <span class="token class-name">String</span> pattern <span class="token operator">=</span> <span class="token string">&quot;E M yyyy HH:mm:ss.SSS Z&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">// 格式化输出</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span>pattern<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 输出内容</span>
    <span class="token comment">// 公元 星期一 10 2020 14:59:06.410 +0800 </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>反之同理，从一个格式化输出的时间，可以获得具体的Date对象。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token comment">// 由Date对象获得格式化日期</span>
    <span class="token comment">// 摸板对象   </span>
    <span class="token class-name">String</span> pattern <span class="token operator">=</span> <span class="token string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">// 日期字符串</span>
    <span class="token class-name">String</span> dateStr <span class="token operator">=</span> <span class="token string">&quot;2020-10-19 15:23:33&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">// 格式化输出</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span>pattern<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>dateStr<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 输出内容</span>
    <span class="token comment">// 1603092213000</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="本地定制化"><a href="#本地定制化" class="header-anchor">#</a> 本地定制化</h4> <p>各个国家对月份的或者星期的称呼可能不同，如果都按Monday，March等输出，并不能满足区域本地化的要求。</p> <p>DateFormatSymbols便是辅助实现的类。可以通过DateFormatSymbols设置星期，月份，上下午，时区等定制化内容。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ParseException</span><span class="token punctuation">{</span>
        <span class="token class-name">Locale</span> locale <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Locale</span><span class="token punctuation">(</span><span class="token string">&quot;zh&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;CHINA&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">DateFormatSymbols</span> dateFormatSymbols <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DateFormatSymbols</span><span class="token punctuation">(</span>locale<span class="token punctuation">)</span><span class="token punctuation">;</span>
        dateFormatSymbols<span class="token punctuation">.</span><span class="token function">setWeekdays</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>
                <span class="token string">&quot;星期一&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;星期二&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;星期三&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;星期四&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;星期五&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;星期六&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;星期日&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">String</span> pattern <span class="token operator">=</span> <span class="token string">&quot;EEEEE MMMMM yyyy&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">SimpleDateFormat</span> simpleDateFormat <span class="token operator">=</span>
                <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> dateFormatSymbols<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>simpleDateFormat<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// 输出</span>
    <span class="token comment">// 星期三 十月 2020</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h4 id="时区"><a href="#时区" class="header-anchor">#</a> 时区</h4> <p>JDK1推出的日期时间处理，没有考虑到时区问题。不同国家和地区使用同一个时间计时，这必然会造成混乱。JDK1.1发布了TimeZone，可以用之代表不同的时区，解决了这个问题。</p> <p>TimeZone代表相对于GMT时间的偏移，精确到分钟，使用字符串&quot;GMT+:08:00&quot;或者&quot;Asia/Shanghai&quot;可代表东八时区。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">timezone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            
        <span class="token comment">// 时区类型</span>
        <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token class-name">TimeZone</span><span class="token punctuation">.</span><span class="token function">getAvailableIDs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>item <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>item <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 按时区输出</span>
        <span class="token class-name">SimpleDateFormat</span> simpleDateFormat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">&quot;yyyy-MM-dd HH:mm:ssZ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        simpleDateFormat<span class="token punctuation">.</span><span class="token function">setTimeZone</span><span class="token punctuation">(</span><span class="token class-name">TimeZone</span><span class="token punctuation">.</span><span class="token function">getTimeZone</span><span class="token punctuation">(</span><span class="token string">&quot;Europe/London&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>simpleDateFormat<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        simpleDateFormat<span class="token punctuation">.</span><span class="token function">setTimeZone</span><span class="token punctuation">(</span><span class="token class-name">TimeZone</span><span class="token punctuation">.</span><span class="token function">getTimeZone</span><span class="token punctuation">(</span><span class="token string">&quot;Asia/Shanghai&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>simpleDateFormat<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>输出</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Africa/Abidjan Africa/Accra Africa/Addis_Ababa Africa/Algiers Africa/Asmara Africa/Asmera Africa/Bamako Africa/Bangui Africa/Banjul Africa/Bissau Africa/Blantyre Africa/Brazzaville Africa/Bujumbura Africa/Cairo Africa/Casablanca Africa/Ceuta Africa/Conakry Africa/Dakar Africa/Dar_es_Salaam Africa/Djibouti Africa/Douala Africa/El_Aaiun Africa/Freetown Africa/Gaborone Africa/Harare Africa/Johannesburg Africa/Juba Africa/Kampala Africa/Khartoum Africa/Kigali Africa/Kinshasa Africa/Lagos Africa/Libreville Africa/Lome Africa/Luanda Africa/Lubumbashi Africa/Lusaka Africa/Malabo Africa/Maputo Africa/Maseru Africa/Mbabane Africa/Mogadishu Africa/Monrovia Africa/Nairobi Africa/Ndjamena Africa/Niamey Africa/Nouakchott Africa/Ouagadougou Africa/Porto-Novo Africa/Sao_Tome Africa/Timbuktu Africa/Tripoli Africa/Tunis Africa/Windhoek America/Adak America/Anchorage America/Anguilla America/Antigua America/Araguaina America/Argentina/Buenos_Aires America/Argentina/Catamarca America/Argentina/ComodRivadavia America/Argentina/Cordoba America/Argentina/Jujuy America/Argentina/La_Rioja America/Argentina/Mendoza America/Argentina/Rio_Gallegos America/Argentina/Salta America/Argentina/San_Juan America/Argentina/San_Luis America/Argentina/Tucuman America/Argentina/Ushuaia America/Aruba America/Asuncion America/Atikokan America/Atka America/Bahia America/Bahia_Banderas America/Barbados America/Belem America/Belize America/Blanc-Sablon America/Boa_Vista America/Bogota America/Boise America/Buenos_Aires America/Cambridge_Bay America/Campo_Grande America/Cancun America/Caracas America/Catamarca America/Cayenne America/Cayman America/Chicago America/Chihuahua America/Coral_Harbour America/Cordoba America/Costa_Rica America/Creston America/Cuiaba America/Curacao America/Danmarkshavn America/Dawson America/Dawson_Creek America/Denver America/Detroit America/Dominica America/Edmonton America/Eirunepe America/El_Salvador America/Ensenada America/Fort_Nelson America/Fort_Wayne America/Fortaleza America/Glace_Bay America/Godthab America/Goose_Bay America/Grand_Turk America/Grenada America/Guadeloupe America/Guatemala America/Guayaquil America/Guyana America/Halifax America/Havana America/Hermosillo America/Indiana/Indianapolis America/Indiana/Knox America/Indiana/Marengo America/Indiana/Petersburg America/Indiana/Tell_City America/Indiana/Vevay America/Indiana/Vincennes America/Indiana/Winamac America/Indianapolis America/Inuvik America/Iqaluit America/Jamaica America/Jujuy America/Juneau America/Kentucky/Louisville America/Kentucky/Monticello America/Knox_IN America/Kralendijk America/La_Paz America/Lima America/Los_Angeles America/Louisville America/Lower_Princes America/Maceio America/Managua America/Manaus America/Marigot America/Martinique America/Matamoros America/Mazatlan America/Mendoza America/Menominee America/Merida America/Metlakatla America/Mexico_City America/Miquelon America/Moncton America/Monterrey America/Montevideo America/Montreal America/Montserrat America/Nassau America/New_York America/Nipigon America/Nome America/Noronha America/North_Dakota/Beulah America/North_Dakota/Center America/North_Dakota/New_Salem America/Ojinaga America/Panama America/Pangnirtung America/Paramaribo America/Phoenix America/Port-au-Prince America/Port_of_Spain America/Porto_Acre America/Porto_Velho America/Puerto_Rico America/Punta_Arenas America/Rainy_River America/Rankin_Inlet America/Recife America/Regina America/Resolute America/Rio_Branco America/Rosario America/Santa_Isabel America/Santarem America/Santiago America/Santo_Domingo America/Sao_Paulo America/Scoresbysund America/Shiprock America/Sitka America/St_Barthelemy America/St_Johns America/St_Kitts America/St_Lucia America/St_Thomas America/St_Vincent America/Swift_Current America/Tegucigalpa America/Thule America/Thunder_Bay America/Tijuana America/Toronto America/Tortola America/Vancouver America/Virgin America/Whitehorse America/Winnipeg America/Yakutat America/Yellowknife Antarctica/Casey Antarctica/Davis Antarctica/DumontDUrville Antarctica/Macquarie Antarctica/Mawson Antarctica/McMurdo Antarctica/Palmer Antarctica/Rothera Antarctica/South_Pole Antarctica/Syowa Antarctica/Troll Antarctica/Vostok Arctic/Longyearbyen Asia/Aden Asia/Almaty Asia/Amman Asia/Anadyr Asia/Aqtau Asia/Aqtobe Asia/Ashgabat Asia/Ashkhabad Asia/Atyrau Asia/Baghdad Asia/Bahrain Asia/Baku Asia/Bangkok Asia/Barnaul Asia/Beirut Asia/Bishkek Asia/Brunei Asia/Calcutta Asia/Chita Asia/Choibalsan Asia/Chongqing Asia/Chungking Asia/Colombo Asia/Dacca Asia/Damascus Asia/Dhaka Asia/Dili Asia/Dubai Asia/Dushanbe Asia/Famagusta Asia/Gaza Asia/Harbin Asia/Hebron Asia/Ho_Chi_Minh Asia/Hong_Kong Asia/Hovd Asia/Irkutsk Asia/Istanbul Asia/Jakarta Asia/Jayapura Asia/Jerusalem Asia/Kabul Asia/Kamchatka Asia/Karachi Asia/Kashgar Asia/Kathmandu Asia/Katmandu Asia/Khandyga Asia/Kolkata Asia/Krasnoyarsk Asia/Kuala_Lumpur Asia/Kuching Asia/Kuwait Asia/Macao Asia/Macau Asia/Magadan Asia/Makassar Asia/Manila Asia/Muscat Asia/Nicosia Asia/Novokuznetsk Asia/Novosibirsk Asia/Omsk Asia/Oral Asia/Phnom_Penh Asia/Pontianak Asia/Pyongyang Asia/Qatar Asia/Qyzylorda Asia/Rangoon Asia/Riyadh Asia/Saigon Asia/Sakhalin Asia/Samarkand Asia/Seoul Asia/Shanghai Asia/Singapore Asia/Srednekolymsk Asia/Taipei Asia/Tashkent Asia/Tbilisi Asia/Tehran Asia/Tel_Aviv Asia/Thimbu Asia/Thimphu Asia/Tokyo Asia/Tomsk Asia/Ujung_Pandang Asia/Ulaanbaatar Asia/Ulan_Bator Asia/Urumqi Asia/Ust-Nera Asia/Vientiane Asia/Vladivostok Asia/Yakutsk Asia/Yangon Asia/Yekaterinburg Asia/Yerevan Atlantic/Azores Atlantic/Bermuda Atlantic/Canary Atlantic/Cape_Verde Atlantic/Faeroe Atlantic/Faroe Atlantic/Jan_Mayen Atlantic/Madeira Atlantic/Reykjavik Atlantic/South_Georgia Atlantic/St_Helena Atlantic/Stanley Australia/ACT Australia/Adelaide Australia/Brisbane Australia/Broken_Hill Australia/Canberra Australia/Currie Australia/Darwin Australia/Eucla Australia/Hobart Australia/LHI Australia/Lindeman Australia/Lord_Howe Australia/Melbourne Australia/NSW Australia/North Australia/Perth Australia/Queensland Australia/South Australia/Sydney Australia/Tasmania Australia/Victoria Australia/West Australia/Yancowinna Brazil/Acre Brazil/DeNoronha Brazil/East Brazil/West CET CST6CDT Canada/Atlantic Canada/Central Canada/Eastern Canada/Mountain Canada/Newfoundland Canada/Pacific Canada/Saskatchewan Canada/Yukon Chile/Continental Chile/EasterIsland Cuba EET EST5EDT Egypt Eire Etc/GMT Etc/GMT+0 Etc/GMT+1 Etc/GMT+10 Etc/GMT+11 Etc/GMT+12 Etc/GMT+2 Etc/GMT+3 Etc/GMT+4 Etc/GMT+5 Etc/GMT+6 Etc/GMT+7 Etc/GMT+8 Etc/GMT+9 Etc/GMT-0 Etc/GMT-1 Etc/GMT-10 Etc/GMT-11 Etc/GMT-12 Etc/GMT-13 Etc/GMT-14 Etc/GMT-2 Etc/GMT-3 Etc/GMT-4 Etc/GMT-5 Etc/GMT-6 Etc/GMT-7 Etc/GMT-8 Etc/GMT-9 Etc/GMT0 Etc/Greenwich Etc/UCT Etc/UTC Etc/Universal Etc/Zulu Europe/Amsterdam Europe/Andorra Europe/Astrakhan Europe/Athens Europe/Belfast Europe/Belgrade Europe/Berlin Europe/Bratislava Europe/Brussels Europe/Bucharest Europe/Budapest Europe/Busingen Europe/Chisinau Europe/Copenhagen Europe/Dublin Europe/Gibraltar Europe/Guernsey Europe/Helsinki Europe/Isle_of_Man Europe/Istanbul Europe/Jersey Europe/Kaliningrad Europe/Kiev Europe/Kirov Europe/Lisbon Europe/Ljubljana Europe/London Europe/Luxembourg Europe/Madrid Europe/Malta Europe/Mariehamn Europe/Minsk Europe/Monaco Europe/Moscow Europe/Nicosia Europe/Oslo Europe/Paris Europe/Podgorica Europe/Prague Europe/Riga Europe/Rome Europe/Samara Europe/San_Marino Europe/Sarajevo Europe/Saratov Europe/Simferopol Europe/Skopje Europe/Sofia Europe/Stockholm Europe/Tallinn Europe/Tirane Europe/Tiraspol Europe/Ulyanovsk Europe/Uzhgorod Europe/Vaduz Europe/Vatican Europe/Vienna Europe/Vilnius Europe/Volgograd Europe/Warsaw Europe/Zagreb Europe/Zaporozhye Europe/Zurich GB GB-Eire GMT GMT0 Greenwich Hongkong Iceland Indian/Antananarivo Indian/Chagos Indian/Christmas Indian/Cocos Indian/Comoro Indian/Kerguelen Indian/Mahe Indian/Maldives Indian/Mauritius Indian/Mayotte Indian/Reunion Iran Israel Jamaica Japan Kwajalein Libya MET MST7MDT Mexico/BajaNorte Mexico/BajaSur Mexico/General NZ NZ-CHAT Navajo PRC PST8PDT Pacific/Apia Pacific/Auckland Pacific/Bougainville Pacific/Chatham Pacific/Chuuk Pacific/Easter Pacific/Efate Pacific/Enderbury Pacific/Fakaofo Pacific/Fiji Pacific/Funafuti Pacific/Galapagos Pacific/Gambier Pacific/Guadalcanal Pacific/Guam Pacific/Honolulu Pacific/Johnston Pacific/Kiritimati Pacific/Kosrae Pacific/Kwajalein Pacific/Majuro Pacific/Marquesas Pacific/Midway Pacific/Nauru Pacific/Niue Pacific/Norfolk Pacific/Noumea Pacific/Pago_Pago Pacific/Palau Pacific/Pitcairn Pacific/Pohnpei Pacific/Ponape Pacific/Port_Moresby Pacific/Rarotonga Pacific/Saipan Pacific/Samoa Pacific/Tahiti Pacific/Tarawa Pacific/Tongatapu Pacific/Truk Pacific/Wake Pacific/Wallis Pacific/Yap Poland Portugal ROK Singapore SystemV/AST4 SystemV/AST4ADT SystemV/CST6 SystemV/CST6CDT SystemV/EST5 SystemV/EST5EDT SystemV/HST10 SystemV/MST7 SystemV/MST7MDT SystemV/PST8 SystemV/PST8PDT SystemV/YST9 SystemV/YST9YDT Turkey UCT US/Alaska US/Aleutian US/Arizona US/Central US/East-Indiana US/Eastern US/Hawaii US/Indiana-Starke US/Michigan US/Mountain US/Pacific US/Pacific-New US/Samoa UTC Universal W-SU WET Zulu EST HST MST ACT AET AGT ART AST BET BST CAT CNT CST CTT EAT ECT IET IST JST MIT NET NST PLT PNT PRT PST SST VST 
2020-10-19 10:18:28+0100
2020-10-19 17:18:28+0800
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="使用中需要注意的"><a href="#使用中需要注意的" class="header-anchor">#</a> 使用中需要注意的</h4> <p>Date作为一个代表了具体时间点的类，理论上应该是不可变类，但是实际情况是它拥有一个公开的方法setTime()，即可以动态修改Date类中对应的时间戳字段。</p> <p>修改后的Date表示的是新的时间，但是还是使用之前的标识符，尤其当多个用户共用此类型变量，或者是在多线程环境中，极易造成混乱。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>   <span class="token class-name">Date</span> date2020 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span> <span class="token operator">*</span> <span class="token number">86400</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   date<span class="token punctuation">.</span><span class="token function">setTime</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>date2020<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token comment">// date 2021</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>早期的时间处理，最为人诟病的便是在多线程环境下的表现。SimpleDateFormat是线程不安全的，一旦使用到SimpleDateFormat去格式化或者翻译时间，就可能引起多线程异常。</p> <p>举一个多线程下使用同一个SimpleDateFormat的例子。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    
    <span class="token keyword">private</span> <span class="token keyword">static</span>  <span class="token class-name">SimpleDateFormat</span> dateFormat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">createException</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token class-name">UnsafeTimeThread</span> timeThread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UnsafeTimeThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            timeThread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span>  <span class="token class-name">UnsafeTimeThread</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span><span class="token punctuation">{</span>
        <span class="token annotation punctuation">@SneakyThrows</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token class-name">String</span> string <span class="token operator">=</span> dateFormat<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dateFormat<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>基本会出现类似的运行结果</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>    at java.text.SimpleDateFormat.parse(SimpleDateFormat.java:1514)
        at java.text.DateFormat.parse(DateFormat.java:364)
        at cn.errison.time.OldTimeDemo$UnsafeTimeThread.run(OldTimeDemo.java:85)
    Exception in thread &quot;Thread-64&quot; java.lang.NumberFormatException: multiple points
        at sun.misc.FloatingDecimal.readJavaFormatString(FloatingDecimal.java:1890)
        at sun.misc.FloatingDecimal.parseDouble(FloatingDecimal.java:110)
        at java.lang.Double.parseDouble(Double.java:538)
        at java.text.DigitList.getDouble(DigitList.java:169)
        at java.text.DecimalFormat.parse(DecimalFormat.java:2089)
        at java.text.SimpleDateFormat.subParse(SimpleDateFormat.java:1869)
        at java.text.SimpleDateFormat.parse(SimpleDateFormat.java:1514)
        at java.text.DateFormat.parse(DateFormat.java:364)
        at cn.errison.time.OldTimeDemo$UnsafeTimeThread.run(OldTimeDemo.java:85)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>产生故障的原因是，SimpleDateFormat不是线程安全的，有类共有变量，这样多线程访问时产生竞态，很有可能会导致异常。</p> <h2 id="jdk8-以后的日期时间处理"><a href="#jdk8-以后的日期时间处理" class="header-anchor">#</a> JDK8 以后的日期时间处理</h2> <p>在忍受了诸多诟病以后，JCP痛定思痛，基于Joda-time推出了全新的API，位于java.time包以下。</p> <p>主要包含以几个类：</p> <ul><li>LocalDate：只包含日期，比如：2016-10-20</li> <li>LocalTime：只包含时间，比如：23:12:10</li> <li>LocalDateTime：包含日期和时间，比如：2016-10-20 23:14:21</li> <li>Instant：时间戳</li> <li>Duration：持续时间，时间差</li> <li>Period：时间段</li> <li>ZoneOffset：时区偏移量，比如：+8:00</li> <li>ZonedDateTime：带时区的时间</li> <li>Clock：时钟，比如获取目前美国纽约的时间</li> <li>DateTimeFormatter：日期时间格式化
下面将按类来介绍他们各自的主要功能。</li></ul> <h3 id="localdate"><a href="#localdate" class="header-anchor">#</a> LocalDate</h3> <p>LocalDate代表日期，与Date拥有一个long时间戳不同的是，LocalDate有三个变量标识日期的变量，分别是年月日，而且都是不可变的。</p> <p>先看一下LocalDate的类继承图。
<img src="/images/Java-deep/%E6%97%A5%E6%9C%9F%E6%97%B6%E9%97%B4%E5%A4%84%E7%90%86-LocalDate.png" alt="LocalDate类继承图"> <br>需要先说明这几个实现的接口</p> <ul><li>Temporal 定义对日期，时间，时区或者这几者组合的&quot;时间对象&quot;的读写访问的框架级接口。用更通俗的话说就是定义了一个可以对时间对象进行操作的接口。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token keyword">boolean</span> <span class="token function">isSupported</span><span class="token punctuation">(</span><span class="token class-name">TemporalUnit</span> unit<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 时间型对象是否支持</span>
    <span class="token keyword">default</span> <span class="token class-name">Temporal</span> <span class="token keyword">with</span><span class="token punctuation">(</span><span class="token class-name">TemporalAdjuster</span> adjuster<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 构造时间对象</span>
    <span class="token keyword">default</span> <span class="token class-name">Temporal</span> <span class="token function">plus</span><span class="token punctuation">(</span><span class="token class-name">TemporalAmount</span> amount<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 增加时间参数构造新对象</span>
    <span class="token keyword">default</span> <span class="token class-name">Temporal</span> <span class="token function">minus</span><span class="token punctuation">(</span><span class="token keyword">long</span> amountToSubtract<span class="token punctuation">,</span> <span class="token class-name">TemporalUnit</span> unit<span class="token punctuation">)</span> <span class="token punctuation">;</span><span class="token comment">// 减少时间参数构造新对象</span>
    <span class="token keyword">long</span> <span class="token function">until</span><span class="token punctuation">(</span><span class="token class-name">Temporal</span> endExclusive<span class="token punctuation">,</span> <span class="token class-name">TemporalUnit</span> unit<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 计算以规定时间单位计算的两个时间差</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>TemporalAdjuster 调整时间对象策略接口。这个接口只有一个方法，因此也是一个功能型接口(Functional Interface)。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token class-name">Temporal</span> <span class="token function">adjustInto</span><span class="token punctuation">(</span><span class="token class-name">Temporal</span> temporal<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 使用封装在实现类中的逻辑来调整指定的时间对象。</span>
    <span class="token comment">// 举例说明: 找到当月的第一天或者最后一天；找到当天的开始时间或者结束时间；找到次年的首天等等。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li><p>Chronology 日历系统的总接口，用于组织和标识日期。由于有不同的日历系统，如ISO8601，中国农历，日本日历等，各种具体日历的实现需要继承此接口并保证线程安全。LocalDate是基于Chronology的一个标准实现。</p></li> <li><p>ChronoLocalDate 继承于Chronology，表示不包含时区，每天中的时间的日期接口。对Chronology中的一些方法提供了默认实现。</p></li></ul> <p>介绍了这些，下面可以正式开始介绍LocalDate，这是一个遵循</p> <div class="custom-block tip"><p>LocalDate中的月份从1~12，日期从1~31，比Date更可读，人性化。</p></div> <div class="language-java line-numbers-mode"><pre class="language-java"><code>   
    <span class="token comment">/**
     * The year.
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> year<span class="token punctuation">;</span>
    <span class="token comment">/**
     * The month-of-year.
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">short</span> month<span class="token punctuation">;</span>
    <span class="token comment">/**
     * The day-of-month.
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">short</span> day<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>LocalDate主要的操作也是围绕这三个变量展开的。构造函数举例日下。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token comment">// 年月日构建</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">LocalDate</span> <span class="token function">of</span><span class="token punctuation">(</span><span class="token keyword">int</span> year<span class="token punctuation">,</span> <span class="token class-name">Month</span> month<span class="token punctuation">,</span> <span class="token keyword">int</span> dayOfMonth<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 当前日期（默认取本地时区）</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">LocalDate</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 按1970以来累进年份</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">LocalDate</span> <span class="token function">ofEpochDay</span><span class="token punctuation">(</span><span class="token keyword">long</span> epochDay<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 按时区和当前时间构建</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">LocalDate</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token class-name">ZoneId</span> zone<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 按Clock对象构建</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">LocalDate</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token class-name">Clock</span> clock<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>构造好的LocalDate对象，其实是可以&quot;改变&quot;的，即可以修改年份月份等。之所以加引号是因为每一个修改，都是在原对象基础上进行拷贝再修改，实际上是构造了一个新的对象，原先的对象并不受影响。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token keyword">public</span> <span class="token class-name">LocalDate</span> <span class="token function">plusYears</span><span class="token punctuation">(</span><span class="token keyword">long</span> yearsToAdd<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">LocalDate</span> <span class="token function">plusMonths</span><span class="token punctuation">(</span><span class="token keyword">long</span> monthsToAdd<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">LocalDate</span> <span class="token function">minusDays</span><span class="token punctuation">(</span><span class="token keyword">long</span> daysToSubtract<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>也有一些参数获取类的功能性的函数。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token comment">// 月份天数</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">lengthOfMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 判断闰年</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isLeapYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 日期在年份中的计数</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getDayOfYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="localtime"><a href="#localtime" class="header-anchor">#</a> LocalTime</h3> <p>与LocalDate类似，LocalTime描述的是一天内的时间，使用四个变量来标识，时分秒纳秒，而且也都是不可变的。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token comment">/**
     * The hour.
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">byte</span> hour<span class="token punctuation">;</span>
    <span class="token comment">/**
     * The minute.
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">byte</span> minute<span class="token punctuation">;</span>
    <span class="token comment">/**
     * The second.
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">byte</span> second<span class="token punctuation">;</span>
    <span class="token comment">/**
     * The nanosecond.
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> nano<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>构造函数也是围绕这几个变量展开</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token comment">// 时分秒纳秒构建</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">LocalTime</span> <span class="token function">of</span><span class="token punctuation">(</span><span class="token keyword">int</span> hour<span class="token punctuation">,</span> <span class="token keyword">int</span> minute<span class="token punctuation">,</span> <span class="token keyword">int</span> second<span class="token punctuation">,</span> <span class="token keyword">int</span> nanoOfSecond<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 按一天中的顺序秒计数构建</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">LocalTime</span> <span class="token function">ofSecondOfDay</span><span class="token punctuation">(</span><span class="token keyword">long</span> secondOfDay<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 按一天中的顺序纳秒计数构建</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">LocalTime</span> <span class="token function">ofNanoOfDay</span><span class="token punctuation">(</span><span class="token keyword">long</span> nanoOfDay<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>同时LocalTime也标识了几个一天中固定的时间点以及一天中的秒数，一小时中的纳秒数等等，不意义列举</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token comment">/**
     * The minimum supported {@code LocalTime}, '00:00'.
     * This is the time of midnight at the start of the day.
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">LocalTime</span> MIN<span class="token punctuation">;</span>
    <span class="token comment">/**
     * The maximum supported {@code LocalTime}, '23:59:59.999999999'.
     * This is the time just before midnight at the end of the day.
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">LocalTime</span> MAX<span class="token punctuation">;</span>
    <span class="token comment">/**
     * The time of midnight at the start of the day, '00:00'.
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">LocalTime</span> MIDNIGHT<span class="token punctuation">;</span>
    <span class="token comment">/**
     * The time of noon in the middle of the day, '12:00'.
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">LocalTime</span> NOON<span class="token punctuation">;</span>
    <span class="token comment">/**
     * Microseconds per day.
     */</span>
    <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> MICROS_PER_DAY <span class="token operator">=</span> SECONDS_PER_DAY <span class="token operator">*</span> <span class="token number">1000_000L</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>其他方法大多是对这几个维度参数的修改。</p> <h3 id="localdatetime"><a href="#localdatetime" class="header-anchor">#</a> LocalDateTime</h3> <p>LocalDateTime有两个变量，实际上是日期和时间的结合体。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token comment">/**
     * The date part.
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">LocalDate</span> date<span class="token punctuation">;</span>
    <span class="token comment">/**
     * The time part.
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">LocalTime</span> time<span class="token punctuation">;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>如果理解了LocalDate和LocalTime，那就很容易可以理解LocalDateTime了。这里举一个查询的函数例子做说明。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">localDateTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">TemporalQuery</span> query <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FamilyBirthDay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>query<span class="token punctuation">.</span><span class="token function">queryFrom</span><span class="token punctuation">(</span><span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">FamilyBirthDay</span> <span class="token keyword">implements</span> <span class="token class-name">TemporalQuery</span><span class="token punctuation">{</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">queryFrom</span><span class="token punctuation">(</span><span class="token class-name">TemporalAccessor</span> temporal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">isFamilyBirthday</span><span class="token punctuation">(</span>temporal<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">private</span> <span class="token class-name">Boolean</span> <span class="token function">isFamilyBirthday</span><span class="token punctuation">(</span><span class="token class-name">TemporalAccessor</span> date<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">int</span> month <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">ChronoField</span><span class="token punctuation">.</span>MONTH_OF_YEAR<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> day   <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">ChronoField</span><span class="token punctuation">.</span>DAY_OF_MONTH<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// Angie's birthday is on April 3.</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>month <span class="token operator">==</span> <span class="token class-name">Month</span><span class="token punctuation">.</span>APRIL<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>day <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> <span class="token class-name">Boolean</span><span class="token punctuation">.</span>TRUE<span class="token punctuation">;</span>

            <span class="token comment">// Sue's birthday is on June 18.</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>month <span class="token operator">==</span> <span class="token class-name">Month</span><span class="token punctuation">.</span>JUNE<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>day <span class="token operator">==</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> <span class="token class-name">Boolean</span><span class="token punctuation">.</span>TRUE<span class="token punctuation">;</span>

            <span class="token comment">// Joe's birthday is on May 29.</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>month <span class="token operator">==</span> <span class="token class-name">Month</span><span class="token punctuation">.</span>MAY<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>day <span class="token operator">==</span> <span class="token number">29</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> <span class="token class-name">Boolean</span><span class="token punctuation">.</span>TRUE<span class="token punctuation">;</span>

            <span class="token keyword">return</span> <span class="token class-name">Boolean</span><span class="token punctuation">.</span>FALSE<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><div class="custom-block tip"><p>可以从LocalDate中增加LocalTime或者向LocalTime中增加LocalDate来获取LocalDateTime类型变量。</p></div> <h3 id="instant"><a href="#instant" class="header-anchor">#</a> Instant</h3> <p>Instant代表时间线上的一个瞬时时间点。使用两个变量标识，分别是1970年以来的秒和秒中的纳秒数。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token comment">/**
     * The number of seconds from the epoch of 1970-01-01T00:00:00Z.
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">long</span> seconds<span class="token punctuation">;</span>
    <span class="token comment">/**
     * The number of nanoseconds, later along the time-line, from the seconds field.
     * This is always positive, and never exceeds 999,999,999.
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> nanos<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>类似于之前的Date类，只不过这个类的字段都是不可变的，而且精确到了纳秒。</p> <h3 id="period-duration"><a href="#period-duration" class="header-anchor">#</a> Period &amp; Duration</h3> <p>这两个类用于标记时间差，区别在于Period用于标记日期差，包括年月日，Duration用于标记基于秒和纳秒的时间差。</p> <ul><li>Period</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">period</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Period</span> period <span class="token operator">=</span> <span class="token class-name">Period</span><span class="token punctuation">.</span><span class="token function">between</span><span class="token punctuation">(</span><span class="token class-name">LocalDate</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">LocalDate</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2019</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">minusDays</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>period<span class="token punctuation">.</span><span class="token function">getYears</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>period<span class="token punctuation">.</span><span class="token function">getMonths</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>period<span class="token punctuation">.</span><span class="token function">getDays</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>Duration</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">duration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Duration</span> duration <span class="token operator">=</span> <span class="token class-name">Duration</span><span class="token punctuation">.</span><span class="token function">between</span><span class="token punctuation">(</span><span class="token class-name">LocalTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">LocalTime</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span> <span class="token number">22</span> <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>duration<span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>duration<span class="token punctuation">.</span><span class="token function">getNano</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="zoneid-zoneoffset-zonedatetime-clock"><a href="#zoneid-zoneoffset-zonedatetime-clock" class="header-anchor">#</a> ZoneId &amp; ZoneOffset &amp; ZoneDateTime &amp; Clock</h3> <p>不同地区由于地球自转的原因，看到日出日落的时间是不一样的，于是以格林尼治为零时，人为划定东西各十二个时区。如北京在东八区。</p> <p>表示东八区，在Java中可以有两种表达形式，一个是以城市命名的&quot;Asia/Shanghai&quot;，一个是以偏移时差命名的&quot;UTC+08:00&quot;。表示前者的是ZoneId,后者就是ZoneOffset。</p> <p>ZoneDateTime则是包含了时区的DateTime。Clock是包含了时区的Instant。具体功能不再赘述。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">zoneDateTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ZoneOffset</span> offset <span class="token operator">=</span> <span class="token class-name">ZoneOffset</span><span class="token punctuation">.</span><span class="token function">ofHours</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>offset<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token class-name">ZoneId</span> zoneId <span class="token operator">=</span> <span class="token class-name">ZoneId</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;Asia/Shanghai&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ZoneId</span> same <span class="token operator">=</span> <span class="token class-name">ZoneId</span><span class="token punctuation">.</span><span class="token function">ofOffset</span><span class="token punctuation">(</span><span class="token string">&quot;UTC&quot;</span><span class="token punctuation">,</span> offset<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">ZonedDateTime</span> zonedDateTime <span class="token operator">=</span> <span class="token class-name">ZonedDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withZoneSameLocal</span><span class="token punctuation">(</span>zoneId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>zonedDateTime<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        zonedDateTime <span class="token operator">=</span> <span class="token class-name">ZonedDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withZoneSameLocal</span><span class="token punctuation">(</span>same<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>zonedDateTime<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="datetimeformatter"><a href="#datetimeformatter" class="header-anchor">#</a> DateTimeFormatter</h3> <p>前面说了这些表示日期和时间的类，实际上还是由数字组成的变量，终究还是需要打印出来或者解析才有实际使用价值。</p> <p>DateTimeFormatter类就是打印和解析日期时间对象的格式化工具，类似于之前版本的SimpleDateFormatter，不过功能更强大。</p> <p>不论是从日期时间翻打印到字符串，还是反过来将字符串翻译成日期时间，都需要遵循一定的规范，DateTimeFormatter也规定了一些字符对应的语法规范。</p> <table><thead><tr><th style="text-align:left;">字符</th> <th style="text-align:left;">含义</th> <th style="text-align:left;">表示形式</th> <th style="text-align:left;">样例</th></tr></thead> <tbody><tr><td style="text-align:left;">G</td> <td style="text-align:left;">era</td> <td style="text-align:left;">text</td> <td style="text-align:left;">AD; Anno Domini; A</td></tr> <tr><td style="text-align:left;">u</td> <td style="text-align:left;">year</td> <td style="text-align:left;">year</td> <td style="text-align:left;">2004; 04</td></tr> <tr><td style="text-align:left;">y</td> <td style="text-align:left;">year-of-era</td> <td style="text-align:left;">year</td> <td style="text-align:left;">2004; 04</td></tr> <tr><td style="text-align:left;">D</td> <td style="text-align:left;">day-of-year</td> <td style="text-align:left;">number</td> <td style="text-align:left;">189</td></tr> <tr><td style="text-align:left;">M/L</td> <td style="text-align:left;">month-of-year</td> <td style="text-align:left;">number/text</td> <td style="text-align:left;">7; 07; Jul; July; J</td></tr> <tr><td style="text-align:left;">d</td> <td style="text-align:left;">day-of-month</td> <td style="text-align:left;">number</td> <td style="text-align:left;">10</td></tr> <tr><td style="text-align:left;">Q/q</td> <td style="text-align:left;">quarter-of-year</td> <td style="text-align:left;">number/text</td> <td style="text-align:left;">3; 03; Q3; 3rd quarter</td></tr> <tr><td style="text-align:left;">Y</td> <td style="text-align:left;">week-based-year</td> <td style="text-align:left;">year</td> <td style="text-align:left;">1996; 96</td></tr> <tr><td style="text-align:left;">w</td> <td style="text-align:left;">week-of-week-based-year</td> <td style="text-align:left;">number</td> <td style="text-align:left;">27</td></tr> <tr><td style="text-align:left;">W</td> <td style="text-align:left;">week-of-month</td> <td style="text-align:left;">number</td> <td style="text-align:left;">4</td></tr> <tr><td style="text-align:left;">E</td> <td style="text-align:left;">day-of-week</td> <td style="text-align:left;">text</td> <td style="text-align:left;">Tue; Tuesday; T</td></tr> <tr><td style="text-align:left;">e/c</td> <td style="text-align:left;">localized day-of-week</td> <td style="text-align:left;">number/text</td> <td style="text-align:left;">2; 02; Tue; Tuesday; T</td></tr> <tr><td style="text-align:left;">F</td> <td style="text-align:left;">week-of-month</td> <td style="text-align:left;">number</td> <td style="text-align:left;">3</td></tr> <tr><td style="text-align:left;">a</td> <td style="text-align:left;">am-pm-of-day</td> <td style="text-align:left;">text</td> <td style="text-align:left;">PM</td></tr> <tr><td style="text-align:left;">h</td> <td style="text-align:left;">clock-hour-of-am-pm (1-12)</td> <td style="text-align:left;">number</td> <td style="text-align:left;">12</td></tr> <tr><td style="text-align:left;">K</td> <td style="text-align:left;">hour-of-am-pm (0-11)</td> <td style="text-align:left;">number</td> <td style="text-align:left;">0</td></tr> <tr><td style="text-align:left;">k</td> <td style="text-align:left;">clock-hour-of-am-pm (1-24)</td> <td style="text-align:left;">number</td> <td style="text-align:left;">0</td></tr> <tr><td style="text-align:left;">H</td> <td style="text-align:left;">hour-of-day (0-23)</td> <td style="text-align:left;">number</td> <td style="text-align:left;">0</td></tr> <tr><td style="text-align:left;">m</td> <td style="text-align:left;">minute-of-hour</td> <td style="text-align:left;">number</td> <td style="text-align:left;">30</td></tr> <tr><td style="text-align:left;">s</td> <td style="text-align:left;">second-of-minute</td> <td style="text-align:left;">number</td> <td style="text-align:left;">55</td></tr> <tr><td style="text-align:left;">S</td> <td style="text-align:left;">fraction-of-second</td> <td style="text-align:left;">fraction</td> <td style="text-align:left;">978</td></tr> <tr><td style="text-align:left;">A</td> <td style="text-align:left;">milli-of-day</td> <td style="text-align:left;">number</td> <td style="text-align:left;">1234</td></tr> <tr><td style="text-align:left;">n</td> <td style="text-align:left;">nano-of-second</td> <td style="text-align:left;">number</td> <td style="text-align:left;">987654321</td></tr> <tr><td style="text-align:left;">N</td> <td style="text-align:left;">nano-of-day</td> <td style="text-align:left;">number</td> <td style="text-align:left;">1234000000</td></tr> <tr><td style="text-align:left;">V</td> <td style="text-align:left;">time-zone ID</td> <td style="text-align:left;">zone-id</td> <td style="text-align:left;">America/Los_Angeles; Z; -08:30</td></tr> <tr><td style="text-align:left;">z</td> <td style="text-align:left;">time-zone name</td> <td style="text-align:left;">zone-name</td> <td style="text-align:left;">Pacific Standard Time; PST</td></tr> <tr><td style="text-align:left;">O</td> <td style="text-align:left;">localized zone-offset</td> <td style="text-align:left;">offset-O</td> <td style="text-align:left;">GMT+8; GMT+08:00; UTC-08:00;</td></tr> <tr><td style="text-align:left;">X</td> <td style="text-align:left;">zone-offset 'Z' for zero</td> <td style="text-align:left;">offset-X</td> <td style="text-align:left;">Z; -08; -0830; -08:30; -083015; -08:30:15;</td></tr> <tr><td style="text-align:left;">x</td> <td style="text-align:left;">zone-offset</td> <td style="text-align:left;">offset-x</td> <td style="text-align:left;">+0000; -08; -0830; -08:30; -083015; -08:30:15;</td></tr> <tr><td style="text-align:left;">Z</td> <td style="text-align:left;">zone-offset</td> <td style="text-align:left;">offset-Z</td> <td style="text-align:left;">+0000; -0800; -08:00;</td></tr> <tr><td style="text-align:left;">p</td> <td style="text-align:left;">pad next</td> <td style="text-align:left;">pad modifier</td> <td style="text-align:left;">1</td></tr> <tr><td style="text-align:left;">'</td> <td style="text-align:left;">escape for text</td> <td style="text-align:left;">delimiter</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">''</td> <td style="text-align:left;">single quote</td> <td style="text-align:left;">literal</td> <td style="text-align:left;">'</td></tr> <tr><td style="text-align:left;">[</td> <td style="text-align:left;">optional section start</td> <td style="text-align:left;"></td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">]</td> <td style="text-align:left;">optional section end</td> <td style="text-align:left;"></td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">#</td> <td style="text-align:left;">reserved for future use</td> <td style="text-align:left;"></td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">{</td> <td style="text-align:left;">reserved for future use</td> <td style="text-align:left;"></td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">}</td> <td style="text-align:left;">reserved for future use</td> <td style="text-align:left;"></td> <td style="text-align:left;"></td></tr></tbody></table> <p>模板即由这些符号组合构成。</p> <p>官方给出了一些常用的模板，可以开箱即用，列举一些如下：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">DateTimeFormatter</span> ISO_LOCAL_DATE<span class="token punctuation">;</span> <span class="token comment">// example '2011-12-03'</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">DateTimeFormatter</span> ISO_OFFSET_DATE<span class="token punctuation">;</span> <span class="token comment">//  '2011-12-03+01:00'</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">DateTimeFormatter</span> ISO_LOCAL_TIME<span class="token punctuation">;</span> <span class="token comment">//  '10:15:30'</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">DateTimeFormatter</span> ISO_LOCAL_DATE_TIME<span class="token punctuation">;</span> <span class="token comment">//  '2011-12-03T10:15:30'</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">DateTimeFormatter</span> ISO_OFFSET_DATE_TIME<span class="token punctuation">;</span> <span class="token comment">//  '2011-12-03T10:15:30+01:00'</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">DateTimeFormatter</span> ISO_ZONED_DATE_TIME <span class="token comment">//  '2011-12-03T10:15:30+01:00[Europe/Paris]'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="小结"><a href="#小结" class="header-anchor">#</a> 小结</h2> <p>本文介绍了JDK8中的日期时间相关的API接口类，并从宏观上介绍了时区等概念。在本文末尾将咧出一些实用的方法样例，以供参考。</p> <div class="language-JAVA line-numbers-mode"><pre class="language-java"><code>    <span class="token comment">// 标准时间格式</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">DateTimeFormatter</span> FULL_FORMAT <span class="token operator">=</span> <span class="token class-name">DateTimeFormatter</span><span class="token punctuation">.</span><span class="token function">ofPattern</span><span class="token punctuation">(</span><span class="token string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">DateTimeFormatter</span> DATE_FORMAT <span class="token operator">=</span> <span class="token class-name">DateTimeFormatter</span><span class="token punctuation">.</span><span class="token function">ofPattern</span><span class="token punctuation">(</span><span class="token string">&quot;yyyy-MM-dd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/qisong3/Techblog/edit/master/docs/java/topic/日期时间处理.md" target="_blank" rel="noopener noreferrer">在Github上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/java/topic/" class="prev router-link-active">
        Java专题系列
      </a></span> <!----></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.97e375c5.js" defer></script><script src="/assets/js/3.fdc0d355.js" defer></script><script src="/assets/js/34.4f7c63b5.js" defer></script><script src="/assets/js/6.4d2b9347.js" defer></script>
  </body>
</html>
